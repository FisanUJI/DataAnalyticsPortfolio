"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79988],{348239:(e,s,t)=>{t.d(s,{Ay:()=>o});var i=t(406029);t(455729);var a=t(335274);let o=e=>s=>(0,i.jsx)(a.$o.Consumer,{children:t=>(0,i.jsx)(e,{...s,...t})})},405038:(e,s,t)=>{t.d(s,{A:()=>S});var i=t(406029),a=t(94588),o=t.n(a);t(455729);var r=t(332988),n=t.n(r),c=t(761908),l=t(772086),p=t(459358),d=t(366317),y=t(716450),g=t(856097),x=t(894368),m=t(874400),u=t(638096);class h extends u.I{constructor(e){super(e,{iconName:"check",path:"M15.379 3.566L5.74 13.203.8 8.262l1.767-1.768L5.74 9.668l7.871-7.87z",viewBox:"0 0 16 16"})}}var A=t(254033),b=t(150547);let f={styles:(0,i.jsx)(o(),{id:"27b3a2f2bc832b23",children:`.icon-check.jsx-27b3a2f2bc832b23{margin-top:${p.Ay.spacing.xxxxs}}.close-btn.jsx-27b3a2f2bc832b23{position:absolute;padding:${p.Ay.spacing.xxs};top:${p.Ay.spacing.xxxs};right:${p.Ay.spacing.xxxs}}${d.Gs.RTL} .close-btn.jsx-27b3a2f2bc832b23{right:unset;left:${p.Ay.spacing.xxxs}}`}),className:"jsx-27b3a2f2bc832b23"},S=e=>{let{onClose:s}=e,{theme:t}=(0,y.df)(),a=(0,b.A)(),r=(e,t)=>{s&&(A.A.trackEvent(A.A.Category.Website,A.A.Action.Website_IssueChecker_CloseOnFinish,t),s())};return(0,i.jsxs)("div",{role:"alert","aria-live":"assertive",className:o().dynamic([["acfbed03bff81d55",[g.Ay.typography.headingSmall(),p.Ay.color.cadet,p.Ay.spacing.xxs,p.Ay.spacing.xs,g.Ay.center(),p.Ay.spacing.xl,p.Ay.spacing.xl,t.colors.labelSuccess,t.colors.labelReverse,p.Ay.spacing.custom("5rem")]]])+" finish-stage-wrapper",children:[s&&(0,i.jsxs)(x.Ay,{type:"single-icon",onClick:e=>r(e,"button"),visuallyHiddenLabel:a("builder.common.closeBrowserTab"),iconSize:32,className:n()(f.className,"close-btn"),children:[(0,i.jsx)(m.A,{path:c.m,fill:t.colors.labelSecondary,size:32}),f.styles]}),e.shouldUseSmallIcon?(0,i.jsx)(m.A,{path:l.C,size:32,fill:t.colors.labelSuccess}):(0,i.jsx)("div",{className:o().dynamic([["acfbed03bff81d55",[g.Ay.typography.headingSmall(),p.Ay.color.cadet,p.Ay.spacing.xxs,p.Ay.spacing.xs,g.Ay.center(),p.Ay.spacing.xl,p.Ay.spacing.xl,t.colors.labelSuccess,t.colors.labelReverse,p.Ay.spacing.custom("5rem")]]])+" icon-container",children:(0,i.jsx)(h,{className:f.className,"aria-label":a("component.builderWorkflows.shared.finishedStage.iconTitle"),height:p.Ay.spacing.md,width:"auto"})}),(0,i.jsx)("h3",{className:o().dynamic([["acfbed03bff81d55",[g.Ay.typography.headingSmall(),p.Ay.color.cadet,p.Ay.spacing.xxs,p.Ay.spacing.xs,g.Ay.center(),p.Ay.spacing.xl,p.Ay.spacing.xl,t.colors.labelSuccess,t.colors.labelReverse,p.Ay.spacing.custom("5rem")]]]),children:e.message}),s&&(0,i.jsx)(x.Ay,{onClick:e=>r(e,"button"),children:a("builder.common.closeBrowserTab")}),f.styles,(0,i.jsx)(o(),{id:"acfbed03bff81d55",dynamic:[g.Ay.typography.headingSmall(),p.Ay.color.cadet,p.Ay.spacing.xxs,p.Ay.spacing.xs,g.Ay.center(),p.Ay.spacing.xl,p.Ay.spacing.xl,t.colors.labelSuccess,t.colors.labelReverse,p.Ay.spacing.custom("5rem")],children:`.finish-stage-wrapper.__jsx-style-dynamic-selector{text-align:center}h3.__jsx-style-dynamic-selector{${g.Ay.typography.headingSmall()}          color: ${p.Ay.color.cadet};margin:${p.Ay.spacing.xxs} 0 ${p.Ay.spacing.xs}}.icon-container.__jsx-style-dynamic-selector{${g.Ay.center()}          width: ${p.Ay.spacing.xl};height:${p.Ay.spacing.xl};background-color:${t.colors.labelSuccess};-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;color:${t.colors.labelReverse};font-size:${p.Ay.spacing.custom("5rem")};text-align:center;margin:auto}`})]})}},437887:(e,s,t)=>{t.d(s,{U:()=>y});var i=t(406029),a=t(755815),o=t(702970),r=t(524959),n=t(911455),c=t(443332),l=t(325247),p=t(716450),d=t(874400);let y=e=>{let{theme:s}=(0,p.df)(),{className:t,accessLevel:y,color:g=s.colors.labelPrimary,isUnlisted:x=!1}=e,m={[l.uQ.PRIVATE]:a.d,[l.uQ.SHARED]:o.w,[l.uQ.PUBLIC]:r.H,[l.uQ.ORG]:n.n,unlisted:c.u},u=x?"unlisted":y;return u?(0,i.jsx)(d.A,{path:m[u],size:16,fill:g,className:t,"aria-hidden":e["aria-hidden"]}):null}},597770:(e,s,t)=>{t.d(s,{A:()=>S});var i=t(406029),a=t(94588),o=t.n(a),r=t(332988),n=t.n(r),c=t(137484),l=t(678277),p=t(464531),d=t(716450),y=t(653075),g=t(856097),x=t(459358),m=t(874400),u=t(455729),h=t(734311);let A="dismissed-callouts",b=e=>{(0,h.ZB)({name:A,id:e,value:!0})},f=e=>(0,h.Lg)({name:A,id:e}),S=e=>{let{className:s,title:t,dismissedStorageId:a,children:r,closeButtonAriaLabel:h,size:A="large",hasIcon:S=!1,isDismissible:j=!1,marginTop:I="0",marginBottom:v="0"}=e,{theme:_,productVariables:k}=(0,d.df)(),[w,$]=function(e){let[s,t]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{e&&f(e)&&t(!0)},[]),[s,()=>{t(!0),e&&b(e)}]}(a),T=(0,y.G)();if(w)return null;let L=_.colors.labelInformation,C={styles:(0,i.jsx)(o(),{id:"73fa766305380bc4",dynamic:[L,x.Ay.spacing.xs,x.Ay.spacing.xs,g.Ay.center(),x.Ay.responsiveBreakpoints.medium,x.Ay.spacing.sm,x.Ay.spacing.sm,x.Ay.responsiveBreakpoints.large,x.Ay.spacing.lg,x.Ay.spacing.lg],children:`.callout-icon.__jsx-style-dynamic-selector{background-color:${L};-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:${x.Ay.spacing.xs};height:${x.Ay.spacing.xs};${g.Ay.center()}}@media(min-width:${x.Ay.responsiveBreakpoints.medium}){.callout-icon.__jsx-style-dynamic-selector{width:${x.Ay.spacing.sm};height:${x.Ay.spacing.sm}}}@media(min-width:${x.Ay.responsiveBreakpoints.large}){.callout-icon.__jsx-style-dynamic-selector{width:${x.Ay.spacing.lg};height:${x.Ay.spacing.lg}}}`}),className:o().dynamic([["73fa766305380bc4",[L,x.Ay.spacing.xs,x.Ay.spacing.xs,g.Ay.center(),x.Ay.responsiveBreakpoints.medium,x.Ay.spacing.sm,x.Ay.spacing.sm,x.Ay.responsiveBreakpoints.large,x.Ay.spacing.lg,x.Ay.spacing.lg]]])};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("aside",{role:"note",className:o().dynamic([["e0477c9122171c7",[x.Ay.spacing.xxs,_.colors.backgroundSecondary,_.colors.labelPrimary,x.Ay.spacing.xxxxs,L,k.borderRadius.regular,I,v,x.Ay.spacing.xxs,g.Ay.typography.bodySmall(),x.Ay.spacing.xxxs,x.Ay.spacing.xxs,g.Ay.typography.caption(),g.Ay.gappedList(x.Ay.spacing.xxs),_.colors.labelLink,_.colors.labelPrimary,g.Ay.typography.subtitleLarge(),g.Ay.typography.subtitleSmall(),x.Ay.spacing.xs,x.Ay.spacing.xs,x.Ay.responsiveBreakpoints.medium,x.Ay.spacing.xxxs,x.Ay.spacing.xs,x.Ay.spacing.xxxs]]])+" "+(n()("callout",A,s)||""),children:[S&&(0,i.jsxs)("div",{className:o().dynamic([["e0477c9122171c7",[x.Ay.spacing.xxs,_.colors.backgroundSecondary,_.colors.labelPrimary,x.Ay.spacing.xxxxs,L,k.borderRadius.regular,I,v,x.Ay.spacing.xxs,g.Ay.typography.bodySmall(),x.Ay.spacing.xxxs,x.Ay.spacing.xxs,g.Ay.typography.caption(),g.Ay.gappedList(x.Ay.spacing.xxs),_.colors.labelLink,_.colors.labelPrimary,g.Ay.typography.subtitleLarge(),g.Ay.typography.subtitleSmall(),x.Ay.spacing.xs,x.Ay.spacing.xs,x.Ay.responsiveBreakpoints.medium,x.Ay.spacing.xxxs,x.Ay.spacing.xs,x.Ay.spacing.xxxs]]]),children:[(0,i.jsx)(m.A,{className:n()("callout-icon",C.className),fill:x.Ay.color.white,size:T?24:16,path:T?c.E:l.B,"aria-hidden":!0}),C.styles]}),(0,i.jsxs)("div",{className:o().dynamic([["e0477c9122171c7",[x.Ay.spacing.xxs,_.colors.backgroundSecondary,_.colors.labelPrimary,x.Ay.spacing.xxxxs,L,k.borderRadius.regular,I,v,x.Ay.spacing.xxs,g.Ay.typography.bodySmall(),x.Ay.spacing.xxxs,x.Ay.spacing.xxs,g.Ay.typography.caption(),g.Ay.gappedList(x.Ay.spacing.xxs),_.colors.labelLink,_.colors.labelPrimary,g.Ay.typography.subtitleLarge(),g.Ay.typography.subtitleSmall(),x.Ay.spacing.xs,x.Ay.spacing.xs,x.Ay.responsiveBreakpoints.medium,x.Ay.spacing.xxxs,x.Ay.spacing.xs,x.Ay.spacing.xxxs]]])+" callout-body",children:[t&&(0,i.jsx)("div",{className:o().dynamic([["e0477c9122171c7",[x.Ay.spacing.xxs,_.colors.backgroundSecondary,_.colors.labelPrimary,x.Ay.spacing.xxxxs,L,k.borderRadius.regular,I,v,x.Ay.spacing.xxs,g.Ay.typography.bodySmall(),x.Ay.spacing.xxxs,x.Ay.spacing.xxs,g.Ay.typography.caption(),g.Ay.gappedList(x.Ay.spacing.xxs),_.colors.labelLink,_.colors.labelPrimary,g.Ay.typography.subtitleLarge(),g.Ay.typography.subtitleSmall(),x.Ay.spacing.xs,x.Ay.spacing.xs,x.Ay.responsiveBreakpoints.medium,x.Ay.spacing.xxxs,x.Ay.spacing.xs,x.Ay.spacing.xxxs]]])+" callout-title",children:t}),r]}),j&&(0,i.jsx)("div",{className:o().dynamic([["e0477c9122171c7",[x.Ay.spacing.xxs,_.colors.backgroundSecondary,_.colors.labelPrimary,x.Ay.spacing.xxxxs,L,k.borderRadius.regular,I,v,x.Ay.spacing.xxs,g.Ay.typography.bodySmall(),x.Ay.spacing.xxxs,x.Ay.spacing.xxs,g.Ay.typography.caption(),g.Ay.gappedList(x.Ay.spacing.xxs),_.colors.labelLink,_.colors.labelPrimary,g.Ay.typography.subtitleLarge(),g.Ay.typography.subtitleSmall(),x.Ay.spacing.xs,x.Ay.spacing.xs,x.Ay.responsiveBreakpoints.medium,x.Ay.spacing.xxxs,x.Ay.spacing.xs,x.Ay.spacing.xxxs]]])+" dismissible-wrapper",children:(0,i.jsx)("button",{type:"button","aria-label":h,onClick:$,"data-testid":"callout-close-button",className:o().dynamic([["e0477c9122171c7",[x.Ay.spacing.xxs,_.colors.backgroundSecondary,_.colors.labelPrimary,x.Ay.spacing.xxxxs,L,k.borderRadius.regular,I,v,x.Ay.spacing.xxs,g.Ay.typography.bodySmall(),x.Ay.spacing.xxxs,x.Ay.spacing.xxs,g.Ay.typography.caption(),g.Ay.gappedList(x.Ay.spacing.xxs),_.colors.labelLink,_.colors.labelPrimary,g.Ay.typography.subtitleLarge(),g.Ay.typography.subtitleSmall(),x.Ay.spacing.xs,x.Ay.spacing.xs,x.Ay.responsiveBreakpoints.medium,x.Ay.spacing.xxxs,x.Ay.spacing.xs,x.Ay.spacing.xxxs]]])+" callout-close-button",children:(0,i.jsx)(m.A,{path:p.R,fill:_.colors.labelPrimary,"aria-hidden":!0})})})]}),(0,i.jsx)(o(),{id:"e0477c9122171c7",dynamic:[x.Ay.spacing.xxs,_.colors.backgroundSecondary,_.colors.labelPrimary,x.Ay.spacing.xxxxs,L,k.borderRadius.regular,I,v,x.Ay.spacing.xxs,g.Ay.typography.bodySmall(),x.Ay.spacing.xxxs,x.Ay.spacing.xxs,g.Ay.typography.caption(),g.Ay.gappedList(x.Ay.spacing.xxs),_.colors.labelLink,_.colors.labelPrimary,g.Ay.typography.subtitleLarge(),g.Ay.typography.subtitleSmall(),x.Ay.spacing.xs,x.Ay.spacing.xs,x.Ay.responsiveBreakpoints.medium,x.Ay.spacing.xxxs,x.Ay.spacing.xs,x.Ay.spacing.xxxs],children:`.callout.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;gap:${x.Ay.spacing.xxs};max-width:100%;background-color:${_.colors.backgroundSecondary};color:${_.colors.labelPrimary};-webkit-border-start:${x.Ay.spacing.xxxxs} solid ${L};-moz-border-start:${x.Ay.spacing.xxxxs} solid ${L};border-inline-start:${x.Ay.spacing.xxxxs} solid ${L};-webkit-border-radius:${k.borderRadius.regular};-moz-border-radius:${k.borderRadius.regular};border-radius:${k.borderRadius.regular};margin:${I} 0 ${v}}.callout.large.__jsx-style-dynamic-selector{padding:${x.Ay.spacing.xxs};${g.Ay.typography.bodySmall()}}.callout.small.__jsx-style-dynamic-selector{padding:${x.Ay.spacing.xxxs} ${x.Ay.spacing.xxs};${g.Ay.typography.caption()}}.callout-body.__jsx-style-dynamic-selector{${g.Ay.gappedList(x.Ay.spacing.xxs)}}.callout-body.__jsx-style-dynamic-selector a{color:${_.colors.labelLink}}.callout-body.__jsx-style-dynamic-selector a.button{color:${_.colors.labelPrimary}}.large.__jsx-style-dynamic-selector .callout-title.__jsx-style-dynamic-selector{${g.Ay.typography.subtitleLarge()}}.small.__jsx-style-dynamic-selector .callout-title.__jsx-style-dynamic-selector{${g.Ay.typography.subtitleSmall()}}.callout-close-button.__jsx-style-dynamic-selector{width:${x.Ay.spacing.xs};height:${x.Ay.spacing.xs};padding:0}.dismissible-wrapper.__jsx-style-dynamic-selector{text-align:end}@media(min-width:${x.Ay.responsiveBreakpoints.medium}){.callout.__jsx-style-dynamic-selector{grid-row-gap:${x.Ay.spacing.xxxs}}.callout.large.__jsx-style-dynamic-selector{padding:${x.Ay.spacing.xs}}.callout-body.__jsx-style-dynamic-selector{grid-row-gap:${x.Ay.spacing.xxxs}}}`})]})}},653075:(e,s,t)=>{t.d(s,{G:()=>o,W:()=>a});var i=t(54831);let a=e=>{let{isViewportMinWidth:s}=(0,i.Ye)();return s(e)},o=()=>a("large")},801422:(e,s,t)=>{t.d(s,{i:()=>n});var i=t(406029),a=t(455729),o=t(918300);let r=(0,a.forwardRef)((e,s)=>{let{children:t,...i}=e,o=a.Children.only(t);if(!i.href||"string"!=typeof i.href)throw Error("No valid href provided for StoryLink");if((0,a.isValidElement)(o))return(0,a.cloneElement)(o,{...i,ref:s});throw Error("Not valid child of <StoryLink />. Use an <a> or anchor like component")}),n=(0,a.forwardRef)(function(e,s){let{children:t,...a}=e,{Link:n}=(0,o.dA)();return(0,i.jsx)(n,{ref:s,...a,children:(0,i.jsx)(r,{children:t})})})},821876:(e,s,t)=>{t.d(s,{M:()=>p});var i=t(406029),a=t(94588),o=t.n(a),r=t(455729);class n extends r.PureComponent{constructor(e){var s;super(e),s=this,this.hasMountedOnceHack=!1,this.state={currentStage:1},this.delayTimer=!1,this.onDelayFinished=!1,this.stages=[],this.previousStage=1,this.goToNextStage=()=>{if(this.delayTimer){this.onDelayFinished=this.goToNextStage;return}let e=this.stages.length-1;this.stages.findIndex(this.findCurrentStage)===e?this.props.onFinish?.():this.setState(e=>({currentStage:e.currentStage+1}))},this.goToPreviousStage=()=>{if(this.delayTimer){this.onDelayFinished=this.goToPreviousStage;return}0===this.stages.findIndex(this.findCurrentStage)?this.props.onClose?.():this.setState(e=>({currentStage:e.currentStage-1}))},this.goToStage=e=>{if(this.delayTimer){this.onDelayFinished=()=>{this.goToStage(e)};return}this.stages.findIndex(this.findCurrentStage)>=0&&this.setState({currentStage:e})},this.registerStage=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s.stages[e-1]={order:e,delay:t}},this.onStageChange=()=>{let e=this.stages.find(this.findCurrentStage);e&&e.delay>0&&(this.delayTimer=setTimeout(()=>{clearTimeout(this.delayTimer),this.delayTimer=!1,"function"==typeof this.onDelayFinished&&(this.onDelayFinished(),this.onDelayFinished=!1)},e.delay))},this.findCurrentStage=e=>e.order===this.state.currentStage}componentDidMount(){this.hasMountedOnceHack||(this.hasMountedOnceHack=!0,this.onStageChange())}componentDidUpdate(e,s){this.previousStage=this.state.currentStage,this.state.currentStage!==s.currentStage&&this.onStageChange()}render(){let e={currentStage:this.state.currentStage,registerStage:this.registerStage,previousStage:this.previousStage,direction:this.props.direction??"vertical"};return(0,i.jsxs)("div",{className:"jsx-2056219836549f7d staged-workflow controller",children:[this.props.children(e,this.goToNextStage,this.goToPreviousStage,this.goToStage),(0,i.jsx)(o(),{id:"2056219836549f7d",children:".controller.jsx-2056219836549f7d{position:absolute;width:100%;height:100%;top:0;right:0;overflow:hidden}"})]})}}var c=t(856097);class l extends r.PureComponent{get position(){return this.props.order-this.props.currentStage}componentDidMount(){this.hasMountedOnceHack||(this.hasMountedOnceHack=!0,this.props.registerStage(this.props.order,this.props.delay),this.props.order===this.props.currentStage&&this.onTransitionEnd())}render(){let e=this.position,s=0===this.position?0:this.position>0?1:-1,t=this.props.order===this.props.previousStage||0===e,a=()=>"horizontal"===this.props.direction?`transform: translateX(${100*s}%)`:`transform: translateY(${100*s}%)`;return(0,i.jsxs)("div",{onTransitionEnd:this.onTransitionEnd,className:o().dynamic([["4e3885dcc84d01ac",[c.Ay.center()]],["dc665c0fecc762f0",[a()]]])+" staged-workflow stage",children:[t&&this.props.children,(0,i.jsx)(o(),{id:"dc665c0fecc762f0",dynamic:[a()],children:`.stage.__jsx-style-dynamic-selector{${a()}}`}),(0,i.jsx)(o(),{id:"4e3885dcc84d01ac",dynamic:[c.Ay.center()],children:`.stage.__jsx-style-dynamic-selector{position:absolute;width:100%;height:100%;right:0;overflow:auto;-webkit-overflow-scrolling:touch;top:0;-webkit-transition:-webkit-transform 400ms ease-in-out;-moz-transition:-moz-transform 400ms ease-in-out;-o-transition:-o-transform 400ms ease-in-out;transition:-webkit-transform 400ms ease-in-out;transition:-moz-transform 400ms ease-in-out;transition:-o-transform 400ms ease-in-out;transition:transform 400ms ease-in-out;${c.Ay.center()}}`})]})}constructor(...e){super(...e),this.hasMountedOnceHack=!1,this.onTransitionEnd=()=>{0===this.position&&"function"==typeof this.props.onStageReady&&this.props.onStageReady()}}}let p={Controller:n,Stage:l}},829532:(e,s,t)=>{t.d(s,{A:()=>w});var i=t(406029),a=t(94588),o=t.n(a),r=t(455729),n=t(390248),c=t(639151),l=t(907303),p=t(459358),d=t(821876),y=t(348239),g=t(153072),x=t(777142),m=t(918300),u=t(122223),h=t(269116),A=t(385526),b=t(721641),f=function(e){return e.DUPLICATE_FAILURE="duplicate",e.CLEANUP_FAILURE="cleanup",e.CROSS_REGION_DUPLICATION_DISALLOWED="CONT_0310",e}({});let S={loadingStageMessage:"component.duplicateItem.load",finishStageMessage:"component.duplicateItem.complete",toast:{success:{title:"component.duplicateItem.toast.duplicationSuccess",description:"component.duplicateItem.nudge.description"},error:{duplicate:{title:"builder.common.sorry",description:"component.duplicateItem.toast.duplicationFail.description"},cleanup:{title:"builder.common.sorry",description:"component.duplicateItem.toast.duplicationError.description"},CONT_0310:{title:"builder.common.sorry",description:"component.duplicateItem.toast.crossRegionError.description"}}}},j={loadingStageMessage:"component.duplicateItem.load",finishStageMessage:"component.duplicateItem.complete",toast:{success:{title:"component.duplicateItem.toast.itemFromTemplate.duplicationSuccess",description:"component.duplicateItem.nudge.itemFromTemplate.description"},error:{duplicate:{title:"builder.common.sorry",description:"component.duplicateItem.toast.itemFromTemplate.duplicationFail.description"},cleanup:{title:"builder.common.sorry",description:"component.duplicateItem.toast.itemFromTemplate.duplicationError.description"},CONT_0310:{title:"builder.common.sorry",description:"component.duplicateItem.toast.itemFromTemplate.crossOriginError.description"}}}},I={loadingStageMessage:"component.duplicateItem.load",finishStageMessage:"component.duplicateItem.complete",toast:{success:{title:"component.duplicateItem.toast.templateFromItem.duplicationSuccess",description:"component.duplicateItem.nudge.templateFromItem.description"},error:{duplicate:{title:"builder.common.sorry",description:"component.duplicateItem.toast.templateFromItem.duplicationFail.description"},cleanup:{title:"builder.common.sorry",description:"component.duplicateItem.toast.templateFromItem.duplicationError.description"},CONT_0310:{title:"builder.common.sorry",description:"component.duplicateItem.toast.templateFromItem.crossOriginError.description"}}}};var v=t(950930),_=t(405038);class k extends r.PureComponent{static #e=this.defaultProps={phase:"duplicate"};constructor(e){super(e),this.onMount=this.onMount.bind(this)}onMount(e){e&&this.props.phase&&this.props.storyItem&&this.runDuplicatePhase()}componentDidUpdate(e){(this.props.storyItem&&!e.storyItem||this.props.phase&&e.phase!==this.props.phase||this.props.duplicateMode&&e.duplicateMode!==this.props.duplicateMode)&&this.runDuplicatePhase()}get stringIds(){return this.duplicationModes?.has("from-template")?j:this.duplicationModes?.has("to-template")?I:S}render(){return(0,i.jsxs)("div",{ref:this.onMount,className:o().dynamic([["f78b97083b817c07",[p.Ay.color.white,v.B.zIndex]]])+" duplicate-workflow",children:[(0,i.jsx)(d.M.Controller,{onFinish:this.props.onFinish,children:(e,s)=>(this.next=s,(0,i.jsxs)(r.Fragment,{children:[(0,i.jsx)(l.Ay,{}),(0,i.jsx)(d.M.Stage,{order:1,delay:v.B.stageDelay,...e,children:(0,i.jsx)(b.A,{message:(0,i.jsx)(n.A,{id:this.stringIds.loadingStageMessage})})}),(0,i.jsx)(d.M.Stage,{order:2,delay:v.B.stageDelay,onStageReady:()=>{this.props.toast.add({type:"success",title:(0,i.jsx)(n.A,{id:this.stringIds.toast.success.title}),details:(0,i.jsx)(n.A,{id:this.stringIds.toast.success.description})}),this.next()},...e,children:(0,i.jsx)(_.A,{message:(0,i.jsx)(n.A,{id:this.stringIds.finishStageMessage})})})]}))}),(0,i.jsx)(o(),{id:"f78b97083b817c07",dynamic:[p.Ay.color.white,v.B.zIndex],children:`.duplicate-workflow.__jsx-style-dynamic-selector{position:fixed;height:100vh;width:100vw;top:0;right:0;background-color:${p.Ay.color.white};z-index:${v.B.zIndex}}`})]})}getDuplicationErrorCode(e){return e===f.CROSS_REGION_DUPLICATION_DISALLOWED?f.CROSS_REGION_DUPLICATION_DISALLOWED:"duplicate"===this.props.phase?f.DUPLICATE_FAILURE:f.CLEANUP_FAILURE}handleDuplicationError(e){let s=this.getDuplicationErrorCode(e);this.props.toast.add({type:"error",title:(0,i.jsx)(n.A,{id:this.stringIds.toast.error[s].title}),details:(0,i.jsx)(n.A,{id:this.stringIds.toast.error[s].description})}),this.props.onClose()}async runDuplicatePhase(){let{storyItem:e,config:{PORTAL_HOST:s},onClose:t}=this.props;if(void 0!==e){e.itemDetails||(e.itemDetails=await h.Ay.fetchItemDetails({itemId:e.itemId,authManager:e.authManager,portalHost:s}));try{switch(this.props.phase){case"cleanup":{let s=await e.duplicateStoryCleanup({titlePrefix:this.props.intl.formatMessage({id:"component.duplicateItem.titleModifier"}),untitledItemString:this.props.intl.formatMessage({id:(0,A.U8)(e.type,e.isTemplate)})});this.duplicationModes=s,this.next();break}case"duplicate":try{let s=this.props.duplicateMode??("view"===e.viewerMode?"published":"draft");"builder"===e.viewerMode&&await e.confirmDataLossBeforeSave?.();let{itemId:t}=await e.duplicateStory(s);this.props.environment.isStatic?window.location.href=this.props.storyRouting.getUrlFromRouteDef((0,m.WU)({route:"builder",itemId:t,itemType:this.props.itemType,isTemplate:this.props.storyItem?.isTemplate??!1})):this.props.storyRouting.routeTo({method:"push",routeDef:(0,m.WU)({route:"builder",itemId:t,itemType:this.props.itemType,isTemplate:this.props.storyItem?.isTemplate??!1,duplicatePhase:"cleanup"})})}catch(e){if(e.message===x.mu)t();else throw Error(e.response?.error?.messageCode)}break;default:t()}}catch(e){console.error(e),this.handleDuplicationError(e)}}}}let w=(0,m.PX)((0,g.az)((0,u.Q1)((0,c.Ay)((0,y.Ay)(k)))))},950930:(e,s,t)=>{t.d(s,{B:()=>i});let i={stageDelay:2e3,zIndex:999}}}]);