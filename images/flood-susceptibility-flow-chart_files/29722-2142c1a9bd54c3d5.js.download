"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29722],{9653:(e,t,r)=>{r.d(t,{b:()=>o});var i=r(325247),a=r(142529),n=r(620538);let o={isStorymapInGroup:e=>new n.q().addSearchGroup(e,"group").and().matchTypes(a.tm).toParam(),fetchAllPublishedStoriesByIds:e=>new n.q().addSearchGroup(e,"id").and().allStories().and().publishedItems().toParam(),fetchAllPubliclyPublishedStoriesAndCollectionsFromUser:e=>new n.q().ownedBy(e).and().accessLevel(i.uQ.PUBLIC).and().startGroup().allStories().or().allCollections().endGroup().toParam(),fetchAllPubliclyPublishedStorymapsItemsFromUser:e=>new n.q().ownedBy(e).and().accessLevel(i.uQ.PUBLIC).and().publishedItems().not().unlistedItems().and().startGroup().allStories().or().allCollections().or().allFrames().endGroup().toParam(),fetchAllPubliclyPublishedStoriesFromUser:e=>new n.q().ownedBy(e).and().accessLevel(i.uQ.PUBLIC).and().allStories().and().publishedItems().toParam(),fetchAllPubliclyPublishedCollectionsFromUser:e=>new n.q().ownedBy(e).and().accessLevel(i.uQ.PUBLIC).and().allCollections().and().publishedItems().toParam(),fetchAllPubliclyPublishedFramesFromUser:e=>new n.q().ownedBy(e).and().accessLevel(i.uQ.PUBLIC).and().allFrames().and().publishedItems().toParam(),fetchAllPubliclyPublishedBriefingsFromUser:e=>new n.q().ownedBy(e).and().accessLevel(i.uQ.PUBLIC).and().allBriefings().and().publishedItems().toParam(),fetchAllCollectionsFromUser:e=>new n.q().ownedBy(e).and().allCollections().toParam(),fetchAllStoriesFromUser:e=>new n.q().ownedBy(e).and().allStories().toParam(),fetchAllFramesFromUser:e=>new n.q().ownedBy(e).and().allFrames().toParam(),fetchAllBriefingsFromUser:e=>new n.q().ownedBy(e).and().allBriefings().toParam(),fetchAllThemesFromUser:e=>new n.q().ownedBy(e).and().allThemes().toParam(),fetchAllPublishedItemsFromUserForIssueChecker:e=>new n.q().ownedBy(e??"").and().publishedItems().not().unlistedItems().and().startGroup().allStories().or().allStoryTemplates().or().allBriefings().or().allThemes().endGroup(),fetchAllPublicySharedPublishedStoriesByIds:e=>new n.q().addSearchGroup(e,"id").endGroup().and().accessLevel(i.uQ.PUBLIC).and().allStories().and().publishedItems().and().toParam(),fetchAllPubliclySharedPublishedNonTranslatedStories:e=>new n.q().ownedBy(e).and().allStories().and().publishedItems().not().allTranslatedItems().and().accessLevel(i.uQ.PUBLIC).not().allThemes().toParam()}},20421:(e,t,r)=>{r.d(t,{Dr:()=>g,Jk:()=>b,Qe:()=>m,Zt:()=>f,b9:()=>T,cT:()=>u,k4:()=>y,ou:()=>h,q_:()=>w});var i=r(651619),a=r(34863),n=r(142529),o=r(230658),s=r(387189),l=r(777142),d=r(270350),p=r(363681),c=r(385526);let m=e=>{let{itemType:t,config:r,isPublicUser:i,isTemplate:p,orgId:m}=e,u=[...r.NEW_ITEM_TYPEKEYWORDS,a.hX.draft,`${d.by.draft}:${r.APP_VERSION}`,n.DD];t===o.z.Collection&&u.push(n.nt),t===o.z.Briefing&&(u.push(n.FW),u.push("alphabriefing")),t===o.z.Frame&&(u.push(n.iz),u.push("alphaframe")),i&&u.push(n.ic),p&&u.push(n.Jv),m&&r.ESRI_MARKETING_ANALYTICS&&r.ESRI_MARKETING_ANALYTICS.orgIds.includes(m)&&u.push(l.AV);let h=t===o.z.Theme?n.Jk:n.tm;return{title:(0,c.x2)({type:t}),tags:[""],typeKeywords:u,type:h,properties:(0,s.c)({thumbnail:["default"]},"replace")}},u=(e,t)=>e&&t&&"undefined"!==e&&"undefined"!==t?`${e} ${t}`:"",h=e=>{let t=(0,i.r8)(),r=(0,i.r8)(),a=(0,i.r8)(),n=(0,i.fG)(),o={root:t,nodes:{[t]:{type:"story",data:{storyTheme:n},config:{coverDate:"first-published",...e.shouldIncludeAuthorCard?{isShowingAuthorCard:!0}:{}},children:[r,a]},[r]:{type:"storycover",data:{type:e.coverType,title:e.title??"",summary:"",byline:u(e.firstName,e.lastName)}},[a]:{type:"navigation",data:{links:[]},config:{isHidden:!0}}},resources:{[n]:{type:"story-theme",data:{themeId:e.baseThemeId,themeBaseVariableOverrides:{},...e.theme&&{themeItemId:e.theme}}}}},s=o.nodes[t].children;if(!s)throw Error("new story created with no children block");if("string"==typeof e.webmap){let t=`r-${e.webmap}`,r=(0,i.r8)();o.resources[t]={type:"webmap",data:{itemId:e.webmap,itemType:"Web Map",type:"default"}},s.push(r),o.nodes[r]={type:"webmap",data:{map:t}}}if("string"==typeof e.webscene){let t=`r-${e.webscene}`,r=(0,i.r8)();o.resources[t]={type:"webmap",data:{itemId:e.webscene,itemType:"Web Scene",type:"default"}},s.push(r),o.nodes[r]={type:"webmap",data:{map:t}}}!e.isTemplate&&(0,c.fO)(e.template)&&v(e.template,a,o);let l=(0,i.r8)();return s.push(l),o.nodes[l]={type:"credits"},o},y=e=>({root:"n-11EM0R",nodes:{"n-11EM0R":{type:"frame",data:{storyTheme:"r-eG121q",storyLogoResource:"r-5fkyWk"},config:{shouldShowLogoOnCover:!0},children:["n-7jkzyu"]},"n-7jkzyu":{type:"frame-custom",data:{cover:"n-hvD8mw",panelStyle:"default"},children:["n-fROiA7","n-fROiA8","n-80UbFv","n-80Ub2343v"]},"n-hvD8mw":{type:"storycover",data:{type:"standard",title:"This is custom frame - dummy JSON",summary:"Adding long description here. Adding long description here. Adding long description here. Adding long description here. Adding long description here. Adding long description here. Adding long description here. ",style:"linear-gradient"},children:["n-70Uesq"]},"n-fROiA7":{type:"frame-slide",data:{backgroundColor:"backgroundColor",foreground:"n-NDSqT3",poi:{text:"ESRI Headquarter - Redlands",lat:33.67893,long:-118.00157}},config:{showPoi:!0}},"n-NDSqT3":{type:"frame-narrative-panel",data:{position:"center-middle",size:"large",panelStyle:"themed"},config:{isHidden:!1},children:["n-DNSqT3"]},"n-DNSqT3":{type:"text",data:{text:"This is text slide in a custom frame. This is type paragraph and size is large.",textSize:"large",textAlignment:"start",type:"paragraph"}},"n-fROiA8":{type:"frame-slide",data:{backgroundColor:"backgroundColor",foreground:"n-NDSqT4",poi:{text:"ESRI Headquarter - Redlands",lat:33.67893,long:-118.00157}},config:{showPoi:!0}},"n-NDSqT4":{type:"frame-narrative-panel",data:{position:"center-middle",size:"large",panelStyle:"themed"},config:{isHidden:!1},children:["n-DNSqT4"]},"n-DNSqT4":{type:"text",data:{text:"This is text slide in a custom frame. This is type quote.",textSize:"medium",textAlignment:"start",type:"quote",attribution:"This is quote attribution on text slide in custom frame"}},"n-80UbFv":{type:"frame-slide",data:{background:"n-gKjCMy",foreground:"n-B4v9mv",poi:{text:"POI on Image slide",lat:34.05717,long:-117.19415}},config:{showPoi:!0}},"n-gKjCMy":{type:"image",data:{image:"r-t1CtPm"},config:{placement:{fill:{x:.5,y:.5},fit:{backgroundType:"blurredMedia",color:"backgroundColor"},type:"fill"}}},"n-70Uesq":{type:"image",data:{image:"r-Plyt9p"},config:{placement:{fill:{x:.5,y:.5},fit:{backgroundType:"blurredMedia",color:"backgroundColor"},type:"fit"}}},"n-B4v9mv":{type:"frame-narrative-panel",data:{position:"center-bottom",size:"medium",panelStyle:"themed"},config:{isHidden:!1},children:["n-4BSqT3"]},"n-4BSqT3":{type:"text",data:{text:"This is image caption",textSize:"medium",textAlignment:"start",type:"paragraph"}},"n-80Ub2343v":{type:"frame-slide",data:{background:"n-MqR4LM",foreground:"n-B4v9mvv"},config:{showPoi:!0}},"n-MqR4LM":{type:"expressmap",data:{map:"r-BpYsPs",alt:"",caption:"expressmap.caption"},config:{size:"standard"}},"n-B4v9mvv":{type:"frame-narrative-panel",data:{position:"center-bottom",size:"medium",panelStyle:"themed"},config:{isHidden:!1},children:["n-4BSqT3s"]},"n-4BSqT3s":{type:"text",data:{text:"This is an expressmap caption",textSize:"medium",textAlignment:"start",type:"paragraph"}}},resources:{"r-eG121q":{data:{themeId:"savanna",themeBaseVariableOverrides:{}},type:"story-theme"},"r-t1CtPm":{data:{height:1e3,width:562,provider:"item-resource",resourceId:"8b8af63d96b2105faf4715f1f007cc5c.jpeg"},type:"image"},"r-5fkyWk":{data:{height:1e3,width:562,provider:"item-resource",resourceId:"bd29bf26a756eb4b0c09f46e0cfb5334.jpeg"},type:"image"},"r-Plyt9p":{data:{height:4e3,width:2250,provider:"item-resource",resourceId:"28cc343166b57c3eadb9d1142fce1c2.jpeg"},type:"image"},"r-BpYsPs":{type:"expressmap",data:{src:`${e}/static/storymaps-builder/expressmaps/theme_preview_sample_expressmap_with_points.json`,provider:"uri"}}}}),g=e=>{let t=(0,i.r8)(),r=(0,i.r8)(),a=(0,i.r8)(),n=(0,i.r8)(),o=(0,i.fG)(),s={type:"story-theme",data:{themeId:e.baseThemeId,themeBaseVariableOverrides:{},...e.theme&&{themeItemId:e.theme}}};return{root:t,nodes:{[t]:{type:"collection",data:{storyTheme:o},children:[r]},[r]:{type:"collection-ui",data:{items:[]},children:[a,n]},[a]:{type:"collection-cover",data:{title:e.title??"",summary:"",byline:u(e.firstName,e.lastName),type:"tiles"}},[n]:{type:"collection-nav",data:{type:"compact"}}},resources:{[o]:s}}},b=e=>{let t=(0,i.r8)(),r=(0,i.fG)(),a=(0,i.r8)(),n=(0,i.r8)(),o=(0,i.r8)(),s={type:"story-theme",data:{themeId:e.baseThemeId,themeBaseVariableOverrides:{},...e.theme&&{themeItemId:e.theme}}},l={root:t,nodes:{[t]:{type:"briefing",data:{storyTheme:r},children:[a]},[a]:{type:"briefing-ui",children:[n]},[n]:{type:"briefing-slide",data:{layout:"cover"},children:[o]},[o]:{type:"storycover",data:{type:"sidebyside",title:"",summary:"",byline:u(e.firstName,e.lastName),titlePanelHorizontalPosition:"start"}}},resources:{[r]:s}};if(!l.nodes[t].children)throw Error("new briefing created with no children block");return l},f=e=>!e||/^(StoryMap|StoryMapCollection|Theme|StoryMapBriefing) \d{10,15}$/.test(e),T=e=>`${e}${p.QU}`,w=async e=>{let t=`${location.origin}${T(e)}`,r=await fetch(t);return await r.blob()},v=(e,t,r)=>{if(!r.nodes[r.root].children)throw Error("Could not insert template nodes, root node does not have children.");let a=(0,i.r8)(),n=r.nodes[r.root].children.indexOf(t)+1;if(r.nodes[r.root].children.splice(n,0,a),e.startsWith("sidecar")){let t=(0,i.r8)();r.nodes[a]={type:"immersive",data:{type:"sidecar",subtype:"sidecar-floating"===e?"floating-panel":"docked-panel",narrativePanelPosition:"start",narrativePanelSize:"small"},children:[t]};let n=(0,i.r8)();r.nodes[t]={type:"immersive-slide",data:{transition:"fade"},children:[n]},r.nodes[n]={type:"immersive-narrative-panel",data:{panelStyle:"themed",position:"start",size:"small"}}}else if(e.startsWith("guided-tour")||e.startsWith("explorer")){let t=e.startsWith("guided-tour");r.nodes[a]={type:"tour",data:{type:t?"guided-tour":"explorer",subtype:t?"guided-tour-media"===e?"media-focused":"map-focused":"explorer-grid"===e?"grid":"list"}}}}},270350:(e,t,r)=>{r.d(t,{O2:()=>n,Wi:()=>o,by:()=>i,cC:()=>a,f7:()=>s});var i=function(e){return e.published="smversionpublished",e.draft="smversiondraft",e}({}),a=function(e){return e.publishedDate="smpublisheddate",e.firstPublishedDate="smfirstpublisheddate",e}({}),n=function(e){return e.Code="code",e.Image="image",e.Image360="image360",e.Video="video",e.ImageOrVideo="image-or-video",e.Audio="audio",e.Embed="embed",e.ArcGISAppEmbed="arcgis-app-embed",e.Map="map",e.WebMap="webmap",e.ExpressMap="expressmap",e.MobilePackage="mobile-package",e.ThematicMap="thematic-map",e.ReadyToUseMap="ready-to-use-map",e.ActivityMap="activity-map",e.Tour="tour",e.Gallery="gallery",e.Table="table",e.Sidecar="sidecar",e.Swipe="swipe",e.Timeline="timeline",e.Custom="custom",e.Globe="globe",e.Terrain="terrain",e.ImageEditor="imageEditor",e.Viewer3D="viewer3D",e.Charting="charting",e.ExpressMapping="expressMapping",e.BinVisualization="binVisualization",e.Template="template",e.File="file-item",e.GeoData="geo-data",e.Chart="chart",e.Infographic="infographic",e}({}),o=function(e){return e[e.Full=1920]="Full",e[e.Wide=1200]="Wide",e[e.Standard=820]="Standard",e}({});function s(e){return"root"in e}},284750:(e,t,r)=>{r.d(t,{D:()=>d,P:()=>l});var i=r(406029),a=r(390248),n=r(894853),o=r(874400),s=r(459358);let l=e=>{let t,r="unknown";switch(e){case"story-privileges-create":case"story-privileges-edit":case"story-privileges-preview":case"theme-public-account":case"briefing-public-account":case"template-public-account":case"story-inaccessible":case"no-beta-feature-access":case"issue-checker-page":case"unsupported-account":case"sign-in":case"blocked-org":r=e,t=403;break;case"item-not-supported-on-route":case"story-not-found":r=e,t=404;break;case"read-only-mode":r=e,t=405;break;case"story-load":case"org-settings-load":r=e,t=500;break;default:r="unknown",t=500}return{errorType:r,statusCode:t}},d=(e,t,r)=>({"unsupported-account":{title:(0,i.jsx)(a.A,{id:"page.error.unsupportedTitle"}),description:(0,i.jsx)(a.A,{id:"page.error.unknownDescription"})},"read-only-mode":{description:r?(0,i.jsx)(a.A,{id:"page.error.readOnlyModeDescription.portal"}):(0,i.jsx)(a.A,{id:"page.error.readOnlyModeDescription",values:{"ago-health":e=>(0,i.jsx)("a",{href:"https://status.arcgis.com",children:e})}})},"sign-in":{description:(0,i.jsx)(a.A,{id:"page.error.signInDescription"})},"story-inaccessible":{description:(0,i.jsx)(a.A,{id:`page.error.${t}.inaccessibleDescription`})},"story-not-found":{description:(0,i.jsx)(a.A,{id:`page.error.${t}.inaccessibleDescription`})},"story-privileges-create":{description:(0,i.jsx)(a.A,{id:"page.error.privilegesCreateDescription"})},"story-privileges-edit":{description:(0,i.jsx)(a.A,{id:"page.error.privilegesEditDescription"})},"story-privileges-preview":{description:(0,i.jsx)(a.A,{id:"page.error.privilegesPreviewDescription"})},"item-not-supported-on-route":{description:(0,i.jsx)(a.A,{id:`page.error.${t}.inaccessibleDescription`})},"story-load":{description:(0,i.jsx)(a.A,{id:"page.error.item.loadDescription"})},"org-settings-load":{description:(0,i.jsx)(a.A,{id:"page.error.orgSettings.loadDescription"})},"theme-public-account":{title:(0,i.jsx)(a.A,{id:"page.error.unknownTitle"}),description:(0,i.jsx)(a.A,{id:"publicAccount.disabled.link",values:{"product-doc":e=>(0,i.jsx)("a",{href:"https://storymaps.arcgis.com/redirect/pricing",children:e})}})},"template-public-account":{title:(0,i.jsx)(a.A,{id:"page.error.unknownTitle"}),description:(0,i.jsx)(a.A,{id:"publicAccount.disabled.link",values:{"product-doc":e=>(0,i.jsx)("a",{href:"https://storymaps.arcgis.com/redirect/pricing",children:e})}})},"briefing-public-account":{title:(0,i.jsx)(a.A,{id:"page.error.unknownTitle"}),description:(0,i.jsx)(a.A,{id:"publicAccount.disabled.link",values:{"product-doc":e=>(0,i.jsx)("a",{href:"https://storymaps.arcgis.com/redirect/pricing",children:e})}})},"blocked-org":{icon:(0,i.jsx)(o.A,{path:n.X,size:32,sizeMultiplier:3,fill:s.Ay.color.emeraldGreen}),description:(0,i.jsx)(a.A,{id:"page.error.noAccess"}),link:{href:`https://${e}`,isExternal:!0,text:(0,i.jsx)(a.A,{id:"page.error.arcgisHome"})}},"distributed-collab-no-draft":{description:(0,i.jsx)(a.A,{id:"page.error.unknownDescription"})},"no-beta-feature-access":{description:(0,i.jsx)(a.A,{id:"page.error.betaGated.description"})},"issue-checker-page":{description:(0,i.jsx)(a.A,{id:"page.error.issueChecker.general"})},unknown:{description:(0,i.jsx)(a.A,{id:"page.error.unknownDescription"})}})},363681:(e,t,r)=>{r.d(t,{HY:()=>i,QU:()=>a,lI:()=>n});let i=["sidecar","sidecar-floating","sidecar-docked","guided-tour","guided-tour-media","guided-tour-map","explorer","explorer-grid","explorer-list"],a="/static/images/item-default-thumbnails/item.jpg";var n=function(e){return e.DRAFT="smdupdraft",e.PUBLISHED="smduppublished",e.TO_TEMPLATE="smduptotemplate",e.FROM_TEMPLATE="smdupfromtemplate",e}({})},385526:(e,t,r)=>{r.d(t,{BT:()=>v,Oc:()=>m,U8:()=>T,Wx:()=>g,Z3:()=>h,ZL:()=>w,eq:()=>b,fO:()=>y,n6:()=>u,x2:()=>c});var i=r(230658),a=r(647345),n=r(34863),o=r(254033),s=r(777142),l=r(958280),d=r(819915),p=r(363681);let c=e=>{let{type:t,dateStamp:r}=e,a=1e3*Math.round(("number"==typeof r?r:r?.getTime()||Date.now())/1e3);return`${({[i.z.Collection]:"StoryMapCollection",[i.z.Story]:"StoryMap",[i.z.Frame]:"StoryMapFrame",[i.z.Briefing]:"StoryMapBriefing",[i.z.Theme]:"Theme"})[t]} ${a}`},m=e=>{let t=(0,a.EN)(e);return t===i.z.Collection?n.jH.Collection:t===i.z.Briefing?n.jH.Briefing:t===i.z.Frame?n.jH.Frame:void 0},u=e=>{if(e){if(e===i.z.Briefing)return n.jH.Briefing;if(e===i.z.Collection)return n.jH.Collection;if(e===i.z.Frame)return n.jH.Frame}},h=(e,t)=>(0,a.EN)(e)===t,y=e=>!!e&&p.HY.includes(e),g=async(e,t)=>{let r=await t?.getUser();if(r?.groups){for(let t of r.groups)if(t.capabilities.includes("updateitemcontrol")&&e.groups?.includes(t.id))return!0}return!1},b=async(e,t)=>{if(e.type===i.z.Collection&&t.items){let{convertToNewCollectionsDataSchema:i}=await r.e(87480).then(r.bind(r,387480));return await i(t,e.portalHost,e.config?.COLLECTION_ITEM_LIMIT||s.oZ,e.authManager)}if(e.type===i.z.Frame){let{nodes:i,root:a}=t,{children:n}=i[a],s=i[n[0]],l=i[s.children[0]];if(l?.type==="timeline-slide"){let{convertToNewFrameTimelineDataSchema:i}=await r.e(33797).then(r.bind(r,333797));return o.A.trackEvent(o.A.Category.Frame,o.A.Action.Frame_ConvertFrameTimeline,e.itemId),i(t)}if(l?.type==="journey-place"&&"journey-slide"===i[l.children[0]].type){let{convertToNewFrameJourneyDataSchema:i}=await r.e(50214).then(r.bind(r,350214));return o.A.trackEvent(o.A.Category.Frame,o.A.Action.Frame_ConvertFrameJourney,e.itemId),i(t)}}return e.type===i.z.Theme&&((0,d.le)(t.variables.titleFontId)&&(t.variables.titleFontId=l.H7[t.variables.titleFontId]),(0,d.le)(t.variables.bodyFontId)&&(t.variables.bodyFontId=l.H7[t.variables.bodyFontId])),t},f={StoryMap:"component.story.emptyTitle","SMX Item":"component.story.emptyTitle",[i.z.Story]:"component.story.emptyTitle",[i.z.Briefing]:"component.briefing.emptyTitle",[i.z.Collection]:"component.collections.emptyTitle",[i.z.Frame]:"component.frame.emptyTitle","StoryMap Theme":"component.theme.emptyTheme","SMX Theme":"component.theme.emptyTheme",[i.z.Theme]:"component.theme.emptyTheme",template:"component.template.emptyTitle"},T=(e,t)=>f[t?"template":e],w=e=>e.itemSubtype?f[e.itemSubtype]:f[e.isTemplate?"template":e.itemType]||"builder.common.untitled";function v(e,t){let r=new Set([]);return e.tags?.includes(p.lI.FROM_TEMPLATE)&&r.add("from-template"),e.tags?.includes(p.lI.TO_TEMPLATE)&&r.add("to-template"),e.tags?.includes(p.lI.PUBLISHED)&&r.add("published"),!t&&e.tags?.includes(p.lI.DRAFT)&&r.add("draft"),t&&r.add("published"),0===r.size&&(r=new Set(["draft"])),r}},462829:(e,t,r)=>{r.d(t,{QC:()=>d,YX:()=>s,aO:()=>n,mS:()=>l,sL:()=>p,ti:()=>c,zM:()=>o});var i=r(814417),a=r(34863);let n=e=>new Promise((t,r)=>{let i=new FileReader;i.onload=()=>{t(i.result)},i.onerror=()=>{r(a.CF.FILE_READ_ERROR)},i.readAsDataURL(e)}),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512,r=e.split(",")[0].split(":")[1].split(";")[0],i=atob(e.split(",")[1]),a=[];for(let e=0;e<i.length;e+=t){let r=i.slice(e,e+t),n=Array(r.length);for(let e=0;e<r.length;e++)n[e]=r.charCodeAt(e);let o=new Uint8Array(n);a.push(o)}return new Blob(a,{type:r})},s=e=>new Blob([JSON.stringify(e)],{type:"application/json"}),l=(e,t)=>{let r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),i=document.createElement("a");i.setAttribute("href",r),i.setAttribute("download",t+".json"),document.body.appendChild(i),i.click(),i.remove()},d=(e,t)=>{if(!e||0>=e.lastIndexOf("."))return;let r=t?.split("/")[0],i=e.toLowerCase().split(".").pop();return"audio"===r&&"mp3"!==i&&"mpeg"!==i&&"wav"!==i&&"x-wav"===(i=t?.slice(t.indexOf("/")+1))&&(i="wav"),i},p=e=>e<5e5?i.SX.Common_Size_XSmall:e<1e6?i.SX.Common_Size_Small:e<5e6?i.SX.Common_Size_Medium:e<1e7?i.SX.Common_Size_Large:e<2e7?i.SX.Common_Size_XLarge:i.SX.Common_Size_XXLarge,c=async e=>{if("image/svg+xml"===e.type)return{ext:"svg",mime:"image/svg+xml"};let t=await e.arrayBuffer(),{fileTypeFromBuffer:i}=await r.e(34541).then(r.bind(r,934541)),a=await i(t);if(a)return"application/xml"===a.mime&&e.name&&e.name.match(/\.gpx$/i)?{ext:"gpx",mime:"application/gpx+xml"}:{ext:a.ext,mime:a.mime}}},620538:(e,t,r)=>{r.d(t,{q:()=>o});var i=r(647682),a=r(142529),n=r(34863);class o extends i.gQ{constructor(e){super(e)}match(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return super.match(...t),this}in(e){return super.in(e),this}startGroup(){return super.startGroup(),this}endGroup(){return super.endGroup(),this}and(){return super.and(),this}or(){return super.or(),this}not(){return super.not(),this}from(e){return super.from(e),this}to(e){return super.to(e),this}boost(e){return super.boost(e),this}clone(){return new o(super.clone().toParam())}addSearchGroup(e,t){return Array.isArray(e)?this.matchAnyIn(e,t):this.match(e).in("group")}matchAnyIn(e,t){let r=Array.isArray(e)&&e.length>1;return r&&this.startGroup(),[].concat(e).forEach((e,r)=>{0!==r&&this.or(),this.match(e).in(t)}),r&&this.endGroup(),this}ownedBy(e){return this.match(e).in("owner")}matchTypes(e){return this.matchAnyIn(e,"type")}matchTypeKeywords(e){return this.matchAnyIn(e,"typekeywords")}allStories(){return this.startGroup().matchTypes(a.vw).not().matchTypeKeywords([a.nt,a.FW,a.iz,a.Jv]).endGroup()}allCollections(){return this.startGroup().matchTypes(a.vw).and().matchTypeKeywords(a.nt).not().matchTypeKeywords([a.Jv,a.iz,a.FW]).endGroup()}allFrames(){return this.startGroup().matchTypes(a.vw).and().matchTypeKeywords(a.iz).not().matchTypeKeywords([a.nt,a.FW,a.Jv]).endGroup()}allBriefings(){return this.startGroup().matchTypes(a.tm).and().matchTypeKeywords(a.FW).not().matchTypeKeywords([a.Jv,a.iz,a.nt]).endGroup()}allThemes(){return this.startGroup().matchTypes(a.Jk).endGroup()}allStoryTemplates(){return this.startGroup().matchTypes(a.vw).and().matchTypeKeywords(a.Jv).not().matchTypeKeywords([a.nt,a.FW,a.iz]).endGroup()}allTranslatedItems(){return this.startGroup().matchTypeKeywords(a.Z$).endGroup()}allApps(){return this.matchTypes([n.J6.WebApp,n.J6.Dashboard,n.J6.WebExperience,n.J6.InsightsPage,n.J6.HubSiteApp,n.J6.EnterpriseSiteApp,n.J6.Survey123])}allFiles(){return this.matchTypes([n.J6.Image,n.J6.PDF])}allMaps(){return this.startGroup().matchTypes([n.J6.WebMap,n.J6.WebScene]).not().matchTypes([a.tm,n.J6.WebApp,"CityEngine Web Scene"]).endGroup()}allWebMaps(){return this.startGroup().matchTypes(n.J6.WebMap).not().matchTypes([a.tm,n.J6.WebApp,"CityEngine Web Scene"]).endGroup()}allMobilePackages(){return this.matchTypes([n.J6.MobileMapPackage,n.J6.MobileScenePackage])}allFeatureLayers(){return this.startGroup().matchTypes(n.J6.FeatureLayer).not().matchTypeKeywords("Table").endGroup()}accessLevel(e){return this.match(e).in("access")}unlistedItems(){return this.startGroup().matchTypeKeywords(a.aE).endGroup()}publishedItems(){return this.matchTypeKeywords([n.hX.published,n.hX.unpublishedChanges])}}}}]);