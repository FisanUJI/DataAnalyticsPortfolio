"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97495],{9600:(e,t,i)=>{i.d(t,{C:()=>a});var s=i(455729),n=i(514181);let o=e=>{let{conditions:t,on:i}=e;(0,s.useEffect)(()=>{let e=e=>{t.every(t=>t(e))&&i(e)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,i])},a=e=>{let{triggerKey:t,hasPrimaryModifier:i=!1,hasShiftKey:a=!1,on:r}=e,l=(0,s.useCallback)(e=>[].concat(t).includes(e.key),[t]),c=(0,s.useCallback)(e=>{if(e.ctrlKey&&e.metaKey||!i&&a)return!1;let t=e.ctrlKey||e.metaKey,s=e.shiftKey;if(!i)return!t;let{eventKeyName:o}=(0,n.d1)();return a?e[o]&&e.shiftKey:!s&&e[o]},[i,a]);o({conditions:(0,s.useMemo)(()=>[l,c],[l,c]),on:r})}},27714:(e,t,i)=>{i.d(t,{A:()=>h});var s=i(406029),n=i(94588),o=i.n(n),a=i(455729),r=i(639151),l=i(856097),c=i(230658),d=i(126966),p=i(367875),y=i(539248);class m extends a.Component{static #e=this.defaultProps={itemType:c.z.Story};render(){let e=(0,y.UK)({itemType:this.props.itemType,isTemplate:this.props.storyItem.isTemplate,title:this.props.title,formatMessage:this.props.intl.formatMessage}),t=this.props.itemType===c.z.Briefing?this.props.storyDesign.themeVariables.mixins.typography.body.size.stepUp1:this.props.storyDesign.themeVariables.mixins.typography.body.size.stepDown1;return(0,s.jsxs)("span",{className:o().dynamic([["393832ae94560c10",[l.Ay.overflowWrap(),t({lineClamp:{numLines:2,fit:!0},overrideBaseFontAdjustment:0})]]])+" story-title",children:[e,(0,s.jsx)(o(),{id:"393832ae94560c10",dynamic:[l.Ay.overflowWrap(),t({lineClamp:{numLines:2,fit:!0},overrideBaseFontAdjustment:0})],children:`.story-title.__jsx-style-dynamic-selector{${l.Ay.overflowWrap()}            ${t({lineClamp:{numLines:2,fit:!0},overrideBaseFontAdjustment:0})}}`})]})}}let h=(0,r.Ay)((0,d.ng)((0,p.e)(m)))},125575:(e,t,i)=>{i.d(t,{A:()=>l});var s=i(455729),n=i(89826),o=i(153072);let a=async e=>{let{authManager:t,clientId:s,portalHost:n}=e,[{default:o},{default:a}]=await Promise.all([Promise.all([i.e(84398),i.e(46584),i.e(4575),i.e(36092),i.e(42268),i.e(16268),i.e(52994)]).then(i.bind(i,816268)),Promise.all([i.e(84398),i.e(36092),i.e(56839)]).then(i.bind(i,258739))]);if(t&&t.token){let e={expires:t.tokenExpires,token:t.token,userId:t.username,server:t.portal};o.registerToken(e)}o.useSignInPage=!1,o.registerOAuthInfos([new a({appId:s,portalUrl:`https://${n}`,popup:!0,popupCallbackUrl:"/oauth-callback?isPopupLogin=true"})])};var r=i(819625);let l=(0,s.memo)(()=>{let{authManager:e}=(0,n.Py)(),{OAUTH_CLIENT_ID:t,PORTAL_HOST:l}=(0,o.UK)();return(0,s.useEffect)(()=>{let e=async e=>{if(e.origin===window.location.origin&&e.data.method===r.r&&"string"==typeof e.data.urlHash){let{default:t}=await Promise.all([i.e(84398),i.e(46584),i.e(4575),i.e(36092),i.e(42268),i.e(16268),i.e(52994)]).then(i.bind(i,816268));t.setOAuthResponseHash(e.data.urlHash)}};return window.addEventListener("message",e,!1),()=>{window.removeEventListener("message",e,!1)}},[]),(0,s.useEffect)(()=>{a({authManager:e,clientId:t,portalHost:l})},[]),null})},300600:(e,t,i)=>{i.d(t,{A:()=>A});var s=i(406029),n=i(94588),o=i.n(n),a=i(947),r=i(332988),l=i.n(r),c=i(54831),d=i(459358),p=i(856097),y=i(230658),m=i(713287),h=i(934829),g=i(241523),x=i(351769),u=i(27714),b=i(670673);let A=e=>{let{formatMessage:t}=(0,a.A)(),i=(0,h.r)(),n=(0,g.ck)(),{isViewportMinWidth:r}=(0,c.Ye)();if(e.printMode)return null;let A="viewer-header",f="briefing-viewer-header",j={styles:(0,s.jsx)(o(),{id:"85aa63950b109ef2",dynamic:[A,f,d.Ay.spacing.xxs,d.Ay.responsiveBreakpoints.medium,A,f,d.Ay.spacing.xs,A,f,d.Ay.responsiveBreakpoints.medium,A,f,A,f],children:`.${A}.${f}.__jsx-style-dynamic-selector{padding:0 ${d.Ay.spacing.xxs}}@media(min-width:${d.Ay.responsiveBreakpoints.medium}){.${A}.${f}.__jsx-style-dynamic-selector{padding:0 ${d.Ay.spacing.xs}}}.${A}.${f}.__jsx-style-dynamic-selector .content{grid-template-columns:1fr auto}@media(min-width:${d.Ay.responsiveBreakpoints.medium}){.${A}.${f}.__jsx-style-dynamic-selector .content{grid-template-columns:1fr auto 1fr}}.${A}.${f}.__jsx-style-dynamic-selector .end-content{justify-self:end}`}),className:o().dynamic([["85aa63950b109ef2",[A,f,d.Ay.spacing.xxs,d.Ay.responsiveBreakpoints.medium,A,f,d.Ay.spacing.xs,A,f,d.Ay.responsiveBreakpoints.medium,A,f,A,f]]])},k=i.briefingDisplay.currentIndex,v=t({id:"component.autoplay.returnToTop.label"},{itemTitle:e.title}),w=(0,s.jsxs)("div",{className:o().dynamic([["7b5ba2888a3e7c24",[p.Ay.gapped({direction:"horizontal",gap:d.Ay.spacing.xxs,alignItems:"center",justifyContent:"start"})]]])+" start-content",children:[e.isOrgItem?(0,s.jsxs)(s.Fragment,{children:[e.shouldShowLogoInHeader&&(0,s.jsx)(m.A,{}),(0,s.jsx)("button",{type:"button","aria-label":v,onClick:e.onTitleClicked,className:o().dynamic([["7b5ba2888a3e7c24",[p.Ay.gapped({direction:"horizontal",gap:d.Ay.spacing.xxs,alignItems:"center",justifyContent:"start"})]]])+" inherit",children:(0,s.jsx)(u.A,{title:e.title,itemType:y.z.Briefing})})]}):e.appLogo,(0,s.jsx)(o(),{id:"7b5ba2888a3e7c24",dynamic:[p.Ay.gapped({direction:"horizontal",gap:d.Ay.spacing.xxs,alignItems:"center",justifyContent:"start"})],children:`.start-content.__jsx-style-dynamic-selector{text-wrap-style:balance;${p.Ay.gapped({direction:"horizontal",gap:d.Ay.spacing.xxs,alignItems:"center",justifyContent:"start"})};}button.inherit.__jsx-style-dynamic-selector{text-align:inherit}`})]}),C=r("medium")&&(0,s.jsx)("div",{className:"center-content",children:(0,s.jsx)(b.A,{shouldDisablePresentationModeUI:e.shouldDisablePresentationModeUI})});return(0,s.jsxs)(x.A,{className:l()(f,j.className),getActiveNodeId:()=>{if(!n.itemData)return;let e=Object.values(n.itemData.nodes).find(e=>"briefing-ui"===e.type),t=e?.children?.filter(e=>!n.itemData.nodes[e]?.config?.isHidden);return t?.[k]},borderThickness:"0px",...e,children:[w,C,j.styles]})}},351769:(e,t,i)=>{i.d(t,{A:()=>z});var s=i(406029),n=i(94588),o=i.n(n),a=i(455729),r=i(332988),l=i.n(r),c=i(856097),d=i(716450),p=i(459358),y=i(777292),m=i(89826),h=i(54831),g=i(230658),x=i(255281),u=i(351453),b=i(153072),A=i(126966),f=i(458151),j=i(354583),k=i(367875),v=i(99979),w=i(843759),C=i(902820),I=i(609374),_=i(241523),S=i(150547);let P=()=>{let e=(0,_.ck)(),t=(0,d.df)(),i=(0,S.A)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:o().dynamic([["14c627d943f8906b",[t.theme.colors.surfaceDefaultStrong,t.theme.colors.interactiveHover,p.Ay.spacing.xxxs,t.theme.colors.interactiveDefault,c.Ay.typography.subtitleLarge(),c.Ay.gapped({direction:"horizontal",gap:p.Ay.spacing.xxs,alignItems:"center",justifyContent:"center"})]]])+" template-banner",children:(0,s.jsx)(y.A,{children:(0,s.jsxs)("div",{className:o().dynamic([["14c627d943f8906b",[t.theme.colors.surfaceDefaultStrong,t.theme.colors.interactiveHover,p.Ay.spacing.xxxs,t.theme.colors.interactiveDefault,c.Ay.typography.subtitleLarge(),c.Ay.gapped({direction:"horizontal",gap:p.Ay.spacing.xxs,alignItems:"center",justifyContent:"center"})]]])+" template-banner-content",children:[(0,s.jsx)("p",{className:o().dynamic([["14c627d943f8906b",[t.theme.colors.surfaceDefaultStrong,t.theme.colors.interactiveHover,p.Ay.spacing.xxxs,t.theme.colors.interactiveDefault,c.Ay.typography.subtitleLarge(),c.Ay.gapped({direction:"horizontal",gap:p.Ay.spacing.xxs,alignItems:"center",justifyContent:"center"})]]]),children:i("builder"===e.viewerMode?"component.templateEditor.banner":"viewer.template.banner")}),(0,s.jsx)(I.A,{backgroundColor:t.theme.colors.outlineSubduedDefault,color:t.theme.colors.labelPrimary})]})})}),(0,s.jsx)(o(),{id:"14c627d943f8906b",dynamic:[t.theme.colors.surfaceDefaultStrong,t.theme.colors.interactiveHover,p.Ay.spacing.xxxs,t.theme.colors.interactiveDefault,c.Ay.typography.subtitleLarge(),c.Ay.gapped({direction:"horizontal",gap:p.Ay.spacing.xxs,alignItems:"center",justifyContent:"center"})],children:`.template-banner.__jsx-style-dynamic-selector{background-color:${t.theme.colors.surfaceDefaultStrong};color:${t.theme.colors.interactiveHover};padding-block:${p.Ay.spacing.xxxs};-webkit-box-shadow:inset 0 0 0 1px ${t.theme.colors.interactiveDefault};-moz-box-shadow:inset 0 0 0 1px ${t.theme.colors.interactiveDefault};box-shadow:inset 0 0 0 1px ${t.theme.colors.interactiveDefault};text-align:center;${c.Ay.typography.subtitleLarge()}}.template-banner-content.__jsx-style-dynamic-selector{${c.Ay.gapped({direction:"horizontal",gap:p.Ay.spacing.xxs,alignItems:"center",justifyContent:"center"})}}`})]})};var $=i(717236);class N extends a.PureComponent{static #e=this.defaultProps={isAvatarHidden:!1};constructor(e){super(e),this.renderItemViewerActions=()=>(0,s.jsx)(w.A,{title:this.props.title,storyId:this.props.storyId,publishStatus:this.props.publishStatus,sharingLevel:this.props.sharingLevel,canEdit:this.props.canEdit,isOrgItem:this.props.isOrgItem,areSocialIconsHidden:this.props.areSocialIconsHidden,isContextMenuHidden:this.props.isContextMenuHidden,storyType:this.props.storyType,itemHref:this.props.itemHref,mode:this.props.mode,canShowLikeButton:this.props.canShowLikeButton,itemOwner:this.props.itemOwner,isRenderedInFrameOrBriefing:this.props.storyType===g.z.Briefing,getActiveNodeId:this.props.getActiveNodeId}),this.renderEndContent=()=>(0,s.jsxs)("div",{className:o().dynamic([["3fc66421d3ca106f",[c.Ay.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"})]]])+" end-content",children:[this.renderItemViewerActions(),this.props.authManager?this.renderSignedInActions():this.props.signedOutUI,(0,s.jsx)(o(),{id:"3fc66421d3ca106f",dynamic:[c.Ay.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"})],children:`.end-content.__jsx-style-dynamic-selector{${c.Ay.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"})}}body.print .end-content.__jsx-style-dynamic-selector{display:none}`})]}),this.renderSignedInActions=()=>this.props.isViewportMaxWidth("medium")||!this.state.isMounted?null:!this.props.isAvatarHidden&&!this.state.isEmbedded&&this.props.mode&&"preview"!==this.props.mode&&"embedded-preview"!==this.props.mode&&(0,s.jsx)("div",{className:"profile-container",children:this.props.avatar}),this.state={isMounted:!1}}componentDidMount(){this.setState({isMounted:!0,isEmbedded:(0,x.nq)()})}render(){let e=this.props.borderThickness??"1px",t=this.props.isOrgItem&&!this.props.storyContext.storyLogo,{foregroundColor:i,backgroundColor:n,separatorColor:a}=(0,$.G)({themeVariables:this.props.storyDesign.themeVariables,websiteTheme:this.props.websiteDesign.theme,flavor:this.props.storyType===g.z.Briefing?this.props.storyType:void 0}),r=this.props.topOffset??0,m=this.props.storyItem.isTemplate&&(0,s.jsx)(d.Pl,{defaultTheme:"light",children:(0,s.jsx)(P,{})});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("header",{role:"banner",className:o().dynamic([["110498008ba2acd1",[r,this.props.appOffset.left,this.props.appOffset.right,i,n,e,a,c.Ay.gapped({direction:"horizontal",gap:p.Ay.spacing.sm,alignItems:"center",justifyContent:"space-between"}),f.q8,e,p.Ay.print.textColor,p.Ay.print.backgroundColor,p.Ay.spacing.xxs,t?"none":"block"]]])+" "+(l()("viewer-header",this.props.className,{disabled:this.props.disabled})||""),children:[void 0===this.props.mode&&m,(0,s.jsx)(y.A,{isFullWidth:this.props.storyType===g.z.Briefing,children:(0,s.jsxs)("div",{className:o().dynamic([["110498008ba2acd1",[r,this.props.appOffset.left,this.props.appOffset.right,i,n,e,a,c.Ay.gapped({direction:"horizontal",gap:p.Ay.spacing.sm,alignItems:"center",justifyContent:"space-between"}),f.q8,e,p.Ay.print.textColor,p.Ay.print.backgroundColor,p.Ay.spacing.xxs,t?"none":"block"]]])+" "+(l()("content",this.props.contentClassName)||""),children:[this.props.shouldShowSkipLink&&!this.state.isEmbedded&&(0,s.jsx)(C.A,{shouldApplyStoryTheme:!0,href:this.props.hashForSkipLink}),this.props.children,this.state.isMounted&&!this.props.isScriptEmbed&&this.renderEndContent()]})}),this.props.mode&&m]}),(0,s.jsx)(o(),{id:"110498008ba2acd1",dynamic:[r,this.props.appOffset.left,this.props.appOffset.right,i,n,e,a,c.Ay.gapped({direction:"horizontal",gap:p.Ay.spacing.sm,alignItems:"center",justifyContent:"space-between"}),f.q8,e,p.Ay.print.textColor,p.Ay.print.backgroundColor,p.Ay.spacing.xxs,t?"none":"block"],children:`.viewer-header.__jsx-style-dynamic-selector{position:-webkit-sticky;position:sticky;top:${r};left:${this.props.appOffset.left};right:${this.props.appOffset.right};z-index:99;color:${i};background-color:${n};border-bottom:${e} solid ${a}}.viewer-header.disabled.__jsx-style-dynamic-selector{pointer-events:none}.content.__jsx-style-dynamic-selector{${c.Ay.gapped({direction:"horizontal",gap:p.Ay.spacing.sm,alignItems:"center",justifyContent:"space-between"})};height:-webkit-calc(${f.q8} - ${e});height:-moz-calc(${f.q8} - ${e});height:calc(${f.q8} - ${e})}body.print .viewer-header.__jsx-style-dynamic-selector{position:relative;color:${p.Ay.print.textColor};background-color:${p.Ay.print.backgroundColor};padding:0 ${p.Ay.spacing.xxs};-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}body.print .viewer-header.__jsx-style-dynamic-selector{display:${t?"none":"block"}}`})]})}}let z=(0,m.hB)((0,u.Fo)((0,v.o)((0,A.ng)((0,b.az)((0,j.Cm)((0,h.S9)((0,d.NV)((0,k.e)(N)))))))))},393585:(e,t,i)=>{i.d(t,{A:()=>g});var s=i(406029),n=i(94588),o=i.n(n),a=i(455729),r=i(332988),l=i.n(r),c=i(716450),d=i(917318),p=i(894368),y=i(126966),m=i(150547),h=i(717236);let g=(0,a.forwardRef)(function(e,t){let{isRenderedInlineInStory:i=!1,isRenderedInFrameOrBriefing:n=!1,...a}=e,r=(0,y.cu)(),{theme:g}=(0,c.df)(),x=(0,m.A)(),u=(0,h.G)({themeVariables:r,websiteTheme:g,flavor:n?"frame":i?"story":void 0}),b=x(a.tooltipId),A="single-icon",f={styles:(0,s.jsx)(o(),{id:"74340962e000da36",dynamic:[A,a.id,u.foregroundColor,u.backgroundColor,A,a.id,u.hoverBackgroundColor,A,a.id,u.activeForegroundColor,u.activeBackgroundColor,A,a.id,u.separatorColor],children:`.${A}.${a.id}.themed.__jsx-style-dynamic-selector>*{color:${u.foregroundColor};background-color:${u.backgroundColor}}.${A}.${a.id}.themed.__jsx-style-dynamic-selector:not(.disabled):hover>*{background-color:${u.hoverBackgroundColor}}.${A}.${a.id}.themed.__jsx-style-dynamic-selector:not(.disabled):is(:active,[aria-haspopup][aria-expanded="true"],[aria-haspopup][aria-expanded="true"]:hover)>*{color:${u.activeForegroundColor};background-color:${u.activeBackgroundColor}}.${A}.${a.id}.themed.disabled.__jsx-style-dynamic-selector>*{color:${u.separatorColor}}`}),className:o().dynamic([["74340962e000da36",[A,a.id,u.foregroundColor,u.backgroundColor,A,a.id,u.hoverBackgroundColor,A,a.id,u.activeForegroundColor,u.activeBackgroundColor,A,a.id,u.separatorColor]]])},j=a.isDisabled?x(a.disabledTooltipId):b;return(0,s.jsxs)(d.m_,{disabled:!j,children:[(0,s.jsx)(d.k$,{autoARIALabelledByEnabled:!1,autoARIADescribedByEnabled:!1,"aria-expanded":a.isActive,"aria-controls":a["aria-controls"],children:(0,s.jsx)(p.Ay,{type:A,className:l()(a.id,"themed",f.className),"aria-expanded":a.isActive,"aria-haspopup":"boolean"==typeof a.isActive,visuallyHiddenLabel:b,disabled:a.isDisabled,onClick:a.onClick,ref:t,children:a.icon})}),(0,s.jsx)(d.ZI,{children:j}),f.styles]})})},417505:(e,t,i)=>{i.d(t,{Z:()=>m});var s=i(406029),n=i(94588),o=i.n(n),a=i(455729),r=i(332988),l=i.n(r),c=i(856097),d=i(459358),p=i(644663),y=i(336303);let m=(0,a.memo)(e=>{let{srOnlyMessage:t,currentNumber:i,totalNumber:n,progressNumbersClassName:a}=e,r=(0,y.Y)(),m=e=>r(e,{minimumIntegerDigits:n.toString().length}),h=m(i),g=m(n),x=n<=0;return(0,s.jsxs)("div",{className:o().dynamic([["2bb63f6f984d7993",[c.Ay.gapped({direction:"horizontal",gap:d.Ay.spacing.xxxs})]]])+" content-progress",children:[(0,s.jsx)("div",{"aria-live":"assertive","aria-atomic":"true",className:o().dynamic([["2bb63f6f984d7993",[c.Ay.gapped({direction:"horizontal",gap:d.Ay.spacing.xxxs})]]])+" "+(p.u||""),children:t}),(0,s.jsxs)("div",{role:"presentation",dir:"ltr",className:o().dynamic([["2bb63f6f984d7993",[c.Ay.gapped({direction:"horizontal",gap:d.Ay.spacing.xxxs})]]])+" "+(a||""),children:[(0,s.jsx)("div",{className:o().dynamic([["2bb63f6f984d7993",[c.Ay.gapped({direction:"horizontal",gap:d.Ay.spacing.xxxs})]]])+" "+(l()({empty:x})||""),children:h}),(0,s.jsx)("div",{className:o().dynamic([["2bb63f6f984d7993",[c.Ay.gapped({direction:"horizontal",gap:d.Ay.spacing.xxxs})]]]),children:"/"}),(0,s.jsx)("div",{className:o().dynamic([["2bb63f6f984d7993",[c.Ay.gapped({direction:"horizontal",gap:d.Ay.spacing.xxxs})]]])+" "+(l()({empty:x})||""),children:g})]}),(0,s.jsx)(o(),{id:"2bb63f6f984d7993",dynamic:[c.Ay.gapped({direction:"horizontal",gap:d.Ay.spacing.xxxs})],children:`[role="presentation"].__jsx-style-dynamic-selector{font-variant-numeric:tabular-nums;${c.Ay.gapped({direction:"horizontal",gap:d.Ay.spacing.xxxs})}}.empty.__jsx-style-dynamic-selector{position:relative;visibility:hidden}.empty.__jsx-style-dynamic-selector::after{visibility:visible;content:"-";position:absolute;inset:0;text-align:center}`})]})})},497077:(e,t,i)=>{i.d(t,{A:()=>O});var s=i(406029),n=i(94588),o=i.n(n),a=i(455729),r=i(639151),l=i(332988),c=i.n(l),d=i(464531),p=i(372805),y=i(856097),m=i(459358),h=i(874400),g=i(54831),x=i(716450),u=i(789016),b=i(230658),A=i(713287),f=i(126966),j=i(354583),k=i(909005),v=i(458151),w=i(393585),C=i(351769),I=i(27714),_=i(717236),S=i(988954),P=i(499757),$=i(917318),N=i(894368),z=i(254033),T=i(150547),L=i(417505);let D=(0,a.memo)(e=>{let{currentTitle:t,currentNumber:i,totalNumber:n}=e,a=(0,T.A)(),r=(0,f.cu)(),l=(0,_.I)(r),d=a("component.collection.navigationControls.ariaLive",{contentTitle:t,index:i,total:n}),p={styles:(0,s.jsx)(o(),{id:"c293721a085d0921",dynamic:[l.defaultForegroundColor,y.Ay.typography.blockReg()],children:`.collection-progress-numbers.__jsx-style-dynamic-selector{color:${l.defaultForegroundColor};${y.Ay.typography.blockReg()}}`}),className:o().dynamic([["c293721a085d0921",[l.defaultForegroundColor,y.Ay.typography.blockReg()]]])};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(L.Z,{srOnlyMessage:d,currentNumber:i,totalNumber:n,progressNumbersClassName:c()("collection-progress-numbers",p.className)}),p.styles]})});class B extends a.PureComponent{render(){let{titlesArray:e}=this.props.collectionData;if(!e)return null;let{currentIndex:t}=this.props.collectionDisplay,i=e.length,n=e[t]||"",a=e[t-1]||"",r=e[t+1]||"",l=(0,_.I)(this.props.storyDesign.themeVariables),d={styles:(0,s.jsx)(o(),{id:"15dd4cd00796eb26",dynamic:[m.Ay.spacing.xxxs,y.Ay.circle(m.Ay.spacing.xs),y.Ay.center(),l.defaultBackgroundColor,l.defaultForegroundColor,l.separatorColor,l.hoverBackgroundColor,l.disabledForegroundColor,l.disabledForegroundColor,l.defaultBackgroundColor],children:`.arrow-button.single-icon.button.__jsx-style-dynamic-selector{padding:${m.Ay.spacing.xxxs}}.arrow-button.single-icon.button.__jsx-style-dynamic-selector .icon-wrapper{${y.Ay.circle(m.Ay.spacing.xs)};${y.Ay.center()}        background-color: ${l.defaultBackgroundColor};color:${l.defaultForegroundColor};border:1px solid ${l.separatorColor};-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;padding:4px}.arrow-button.single-icon.button.__jsx-style-dynamic-selector:not(.disabled):hover .icon-wrapper,.arrow-button.single-icon.button.__jsx-style-dynamic-selector:not(.disabled):active .icon-wrapper{background-color:${l.hoverBackgroundColor}}.arrow-button.single-icon.button.disabled.__jsx-style-dynamic-selector{color:${l.disabledForegroundColor};cursor:not-allowed}.arrow-button.single-icon.disabled.__jsx-style-dynamic-selector .icon-wrapper{color:${l.disabledForegroundColor};background-color:${l.defaultBackgroundColor}}`}),className:o().dynamic([["15dd4cd00796eb26",[m.Ay.spacing.xxxs,y.Ay.circle(m.Ay.spacing.xs),y.Ay.center(),l.defaultBackgroundColor,l.defaultForegroundColor,l.separatorColor,l.hoverBackgroundColor,l.disabledForegroundColor,l.disabledForegroundColor,l.defaultBackgroundColor]]])},p=i-1;return(0,s.jsxs)("nav",{"aria-label":this.props.intl.formatMessage({id:"component.collections.navigationControls.navbar.ariaLabel"}),className:o().dynamic([["446f6e4e0408ab5c",[y.Ay.gapped({direction:"horizontal",gap:m.Ay.spacing.xxxs,alignItems:"center",justifyContent:"center"}),y.Ay.center(),l.defaultBackgroundColor,l.defaultForegroundColor,y.Ay.circle(m.Ay.spacing.xs),l.hoverBackgroundColor,l.hoverForegroundColor,l.disabledForegroundColor]]])+" arrow-button-container",children:[(0,s.jsxs)($.m_,{disabled:0===t,offset:0,children:[(0,s.jsx)($.k$,{children:(0,s.jsx)(N.Ay,{className:c()("arrow-button",d.className),onClick:this.onClickPrevious,disabled:0===t,type:"single-icon",visuallyHiddenLabel:this.props.intl.formatMessage({id:"common.previous"}),children:(0,s.jsx)(h.A,{path:S.W,size:16,shouldFlipRTL:!0})})}),(0,s.jsx)($.ZI,{children:t>0?a:""})]}),(0,s.jsx)(D,{currentTitle:n,currentNumber:t+1,totalNumber:i}),(0,s.jsxs)($.m_,{disabled:t>=p,offset:0,children:[(0,s.jsx)($.k$,{children:(0,s.jsx)(N.Ay,{className:c()("arrow-button",d.className),onClick:this.onClickNext,disabled:t>=i-1,type:"single-icon",visuallyHiddenLabel:this.props.intl.formatMessage({id:"common.next"}),children:(0,s.jsx)(h.A,{path:P.N,size:16,shouldFlipRTL:!0})})}),(0,s.jsx)($.ZI,{children:t<p?r:""})]}),d.styles,(0,s.jsx)(o(),{id:"446f6e4e0408ab5c",dynamic:[y.Ay.gapped({direction:"horizontal",gap:m.Ay.spacing.xxxs,alignItems:"center",justifyContent:"center"}),y.Ay.center(),l.defaultBackgroundColor,l.defaultForegroundColor,y.Ay.circle(m.Ay.spacing.xs),l.hoverBackgroundColor,l.hoverForegroundColor,l.disabledForegroundColor],children:`.arrow-button-container.__jsx-style-dynamic-selector{${y.Ay.gapped({direction:"horizontal",gap:m.Ay.spacing.xxxs,alignItems:"center",justifyContent:"center"})}}.arrow-button.__jsx-style-dynamic-selector{${y.Ay.center()}            background-color: ${l.defaultBackgroundColor};color:${l.defaultForegroundColor};${y.Ay.circle(m.Ay.spacing.xs)}}.arrow-button.__jsx-style-dynamic-selector:not([disabled]):hover{background-color:${l.hoverBackgroundColor};color:${l.hoverForegroundColor}}.arrow-button[disabled].__jsx-style-dynamic-selector{color:${l.disabledForegroundColor};cursor:not-allowed}`})]})}constructor(...e){super(...e),this.onClickPrevious=()=>{this.onClickArrow(this.props.collectionDisplay.currentIndex-1)},this.onClickNext=()=>{this.onClickArrow(this.props.collectionDisplay.currentIndex+1)},this.onClickArrow=e=>{this.props.collectionDisplay.updateCollectionDisplay({currentIndex:e}),z.A.trackEvent(z.A.Category.Collection,z.A.Action.Collection_Present_Navigate,z.A.Name.Collection_Present_Navigate_Arrow)}}}let F=(0,k.B)((0,r.Ay)((0,f.ng)(B)));class M extends a.Component{static #e=this.defaultProps={canShowItemTitle:!0};componentDidMount(){this.props.appOffset.updateAppOffsetValues({top:{storyHeader:(0,u.U)(v.q8)}})}componentWillUnmount(){this.props.appOffset.updateAppOffsetValues({top:{storyHeader:0}})}render(){let e=this.props.isViewportMinWidth("medium"),t=this.props.isViewportMaxWidth("medium"),i="compact"===this.props.collectionData.navigationType,{isCoverShowing:n,currentIndex:a}=this.props.collectionDisplay,r=n?void 0:this.props.getItemHref?.(a),l=!n&&e&&!this.props.isPortrait&&this.props.canShowItemTitle,g=n&&!this.props.isOrgItem||!this.props.canShowItemTitle,x=!n&&(i||t),u=a>=0&&!this.props.collectionDisplay.hideCover,f=u&&(l||g),{separatorColor:j}=(0,_.G)({themeVariables:this.props.storyDesign.themeVariables,websiteTheme:this.props.websiteDesign.theme}),k={styles:(0,s.jsx)(o(),{id:"bce94b96452b000b",children:".three-column-header.jsx-bce94b96452b000b{grid-template-columns:2fr 1fr 2fr}.three-column-header.jsx-bce94b96452b000b .end-content{-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}"}),className:"jsx-bce94b96452b000b"};return(0,s.jsxs)(C.A,{...this.props,contentClassName:c()(k.className,{"three-column-header":x}),itemHref:r,children:[(0,s.jsxs)("div",{className:o().dynamic([["a6d42509506c810",[y.Ay.gapped({direction:"horizontal",gap:m.Ay.spacing.xxs,alignItems:"center",justifyContent:"start"}),m.Ay.spacing.custom("3.6rem"),j]]])+" start-content",children:[u&&(0,s.jsx)(w.A,{id:"toggle-button",tooltipId:n?"component.collections.closeOverview":"component.collections.openOverview",onClick:this.toggleView,icon:(0,s.jsx)(h.A,{path:n?d.R:p.R,size:24})}),f&&(0,s.jsx)("div",{className:o().dynamic([["a6d42509506c810",[y.Ay.gapped({direction:"horizontal",gap:m.Ay.spacing.xxs,alignItems:"center",justifyContent:"start"}),m.Ay.spacing.custom("3.6rem"),j]]])+" pipe"}),l&&(0,s.jsxs)(s.Fragment,{children:[this.props.shouldShowLogoInHeader&&!g&&(0,s.jsx)(A.A,{}),(0,s.jsx)(I.A,{title:this.props.title,itemType:b.z.Collection})]}),g&&this.props.appLogo]}),x&&(0,s.jsx)(F,{}),k.styles,(0,s.jsx)(o(),{id:"a6d42509506c810",dynamic:[y.Ay.gapped({direction:"horizontal",gap:m.Ay.spacing.xxs,alignItems:"center",justifyContent:"start"}),m.Ay.spacing.custom("3.6rem"),j],children:`.start-content.__jsx-style-dynamic-selector{${y.Ay.gapped({direction:"horizontal",gap:m.Ay.spacing.xxs,alignItems:"center",justifyContent:"start"})}}.start-content.__jsx-style-dynamic-selector .toggle-button .icon-wrapper{padding:4px}.pipe.__jsx-style-dynamic-selector{height:${m.Ay.spacing.custom("3.6rem")};width:1px;background-color:${j}}`})]})}constructor(...e){super(...e),this.toggleView=()=>{this.props.collectionDisplay.updateCollectionDisplay({isCoverShowing:!this.props.collectionDisplay.isCoverShowing})}}}let O=(0,k.B)((0,r.Ay)((0,f.ng)((0,g.S9)((0,j.Cm)((0,x.NV)(M))))))},502648:(e,t,i)=>{i.d(t,{N:()=>r});var s=i(455729),n=i(789016),o=i(354583),a=i(458151);let r=()=>{let{updateAppOffsetValues:e,top:t}=(0,o.k3)(),i=t>=a.q8,r=(0,s.useCallback)(t=>{t!==i&&("boolean"!=typeof t&&(t=!i),e({top:{storyHeader:t?(0,n.U)(a.q8):0}}))},[e,i]);return{hasSpaceForHeader:i,toggleHeaderSpace:r}}},536275:(e,t,i)=>{i.d(t,{A:()=>j});var s=i(406029),n=i(94588),o=i.n(n),a=i(455729),r=i(639151),l=i(856097),c=i(459358),d=i(716450),p=i(789016),y=i(531024),m=i(713287),h=i(126966),g=i(354583),x=i(367875),u=i(458151),b=i(351769),A=i(27714);class f extends a.Component{static #e=this.defaultProps={canShowItemTitle:!0};componentDidMount(){let e=(0,p.U)(u.q8),t=(0,p.U)(u.wC);this.props.appOffset.updateAppOffsetValues({top:{storyHeader:e,templateBanner:this.props.storyItem.isTemplate?t:0}})}componentDidUpdate(e){let t=(0,y.kp)(this.props.storyDesign.themeVariables);t!==(0,y.kp)(e.storyDesign.themeVariables)&&this.props.websiteDesign.updateWebsiteTheme(t)}componentWillUnmount(){this.props.appOffset.updateAppOffsetValues({top:{storyHeader:0,templateBanner:0}})}render(){let e=this.props.intl.formatMessage({id:"component.autoplay.returnToTop.label"},{itemTitle:this.props.title});return(0,s.jsx)(b.A,{...this.props,children:(0,s.jsxs)("div",{className:o().dynamic([["bc859b5f78a8d889",[l.Ay.gapped({direction:"horizontal",gap:c.Ay.spacing.xxs,alignItems:"center",justifyContent:"center"})]]])+" start-content",children:[this.props.isOrgItem?(0,s.jsxs)(s.Fragment,{children:[this.props.shouldShowLogoInHeader&&this.props.canShowItemTitle&&(0,s.jsx)(m.A,{}),(0,s.jsx)("button",{type:"button","aria-label":e,onClick:this.props.onTitleClicked,className:o().dynamic([["bc859b5f78a8d889",[l.Ay.gapped({direction:"horizontal",gap:c.Ay.spacing.xxs,alignItems:"center",justifyContent:"center"})]]])+" inherit",children:this.props.canShowItemTitle?(0,s.jsx)(A.A,{title:this.props.title}):this.props.appLogo})]}):this.props.appLogo,(0,s.jsx)(o(),{id:"bc859b5f78a8d889",dynamic:[l.Ay.gapped({direction:"horizontal",gap:c.Ay.spacing.xxs,alignItems:"center",justifyContent:"center"})],children:`.start-content.__jsx-style-dynamic-selector{${l.Ay.gapped({direction:"horizontal",gap:c.Ay.spacing.xxs,alignItems:"center",justifyContent:"center"})}}button.inherit.__jsx-style-dynamic-selector{color:inherit;text-align:inherit}`})]})})}}let j=(0,g.Cm)((0,r.Ay)((0,h.ng)((0,d.NV)((0,x.e)(f)))))},616053:(e,t,i)=>{i.d(t,{G:()=>l});let s={node:{"activity-map":{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(81125),i.e(65623),i.e(4909),i.e(59914),i.e(12417)]).then(i.bind(i,295453))},audio:{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(81125),i.e(65623),i.e(4909),i.e(98572)]).then(i.bind(i,81076))},text:{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(81125),i.e(65623),i.e(4909),i.e(29273)]).then(i.bind(i,404909))},instruction:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(34248)]).then(i.bind(i,234248))},table:{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(16104),i.e(81125),i.e(65623),i.e(4909),i.e(38794)]).then(i.bind(i,134434))},button:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(32794)]).then(i.bind(i,232794))},separator:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(56859)]).then(i.bind(i,156859))},carousel:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(84729)]).then(i.bind(i,484729))},gallery:{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(81125),i.e(65623),i.e(4909),i.e(59914),i.e(21889)]).then(i.bind(i,486744))},storycover:{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(81125),i.e(65623),i.e(4909),i.e(13043)]).then(i.bind(i,645995))},immersive:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(41761)]).then(i.bind(i,641761))},"immersive-slide":{load:()=>Promise.all([i.e(27278),i.e(20883),i.e(33933),i.e(45153),i.e(45367),i.e(65882),i.e(26274),i.e(8700),i.e(43331),i.e(93320),i.e(40846),i.e(847),i.e(36065),i.e(33283),i.e(9443),i.e(60655),i.e(85012),i.e(39296),i.e(41932),i.e(31618),i.e(85585),i.e(56096),i.e(11857),i.e(80774),i.e(84398),i.e(53124),i.e(95376),i.e(46584),i.e(4575),i.e(50991),i.e(36092),i.e(75775),i.e(58415),i.e(81125),i.e(26766),i.e(58294),i.e(75080),i.e(36756),i.e(83476),i.e(24643),i.e(81061),i.e(65139),i.e(87395)]).then(i.bind(i,54531))},"immersive-narrative-panel":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(75365)]).then(i.bind(i,275365))},tour:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(4730)]).then(i.bind(i,804730))},"tour-place":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(41585)]).then(i.bind(i,941585))},"tour-map":{load:()=>Promise.all([i.e(46593),i.e(27278),i.e(65882),i.e(26274),i.e(8700),i.e(43331),i.e(93320),i.e(40846),i.e(847),i.e(36065),i.e(33283),i.e(9443),i.e(60655),i.e(85012),i.e(39296),i.e(41932),i.e(31618),i.e(85585),i.e(56096),i.e(11857),i.e(80774),i.e(84398),i.e(53124),i.e(95376),i.e(4575),i.e(50991),i.e(36092),i.e(30957),i.e(20678),i.e(77610),i.e(21310),i.e(81125),i.e(64358),i.e(69262)]).then(i.bind(i,269262))},story:{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(81125),i.e(65623),i.e(4909),i.e(92815),i.e(31125),i.e(21335)]).then(i.bind(i,831125))},embed:{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(81125),i.e(65623),i.e(4909),i.e(62249),i.e(7520)]).then(i.bind(i,162249))},image:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(83322)]).then(i.bind(i,883322))},image360:{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(81125),i.e(65623),i.e(4909),i.e(51289)]).then(i.bind(i,332449))},video:{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(81125),i.e(65623),i.e(4909),i.e(62249),i.e(62547),i.e(85139)]).then(i.bind(i,62547))},expressmap:{load:()=>Promise.all([i.e(46593),i.e(41426),i.e(20185),i.e(20883),i.e(37280),i.e(8700),i.e(40846),i.e(33283),i.e(9443),i.e(14320),i.e(80774),i.e(68763),i.e(84398),i.e(65540),i.e(53124),i.e(95376),i.e(46584),i.e(4575),i.e(50991),i.e(36092),i.e(22568),i.e(68546),i.e(79339),i.e(42268),i.e(46633),i.e(55187),i.e(45997),i.e(30957),i.e(77272),i.e(11439),i.e(81125),i.e(4909),i.e(60808),i.e(51635),i.e(64358),i.e(58262),i.e(62249),i.e(82813)]).then(i.bind(i,950364))},webmap:{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(84398),i.e(36092),i.e(22568),i.e(79339),i.e(28179),i.e(81125),i.e(65623),i.e(4909),i.e(33373)]).then(i.bind(i,333373))},"thematic-map":{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(65882),i.e(26274),i.e(8700),i.e(43331),i.e(93320),i.e(40846),i.e(847),i.e(36065),i.e(33283),i.e(9443),i.e(60655),i.e(85012),i.e(39296),i.e(41932),i.e(31618),i.e(85585),i.e(56096),i.e(11857),i.e(80774),i.e(84398),i.e(95376),i.e(4575),i.e(50991),i.e(36092),i.e(22568),i.e(79339),i.e(30957),i.e(72091),i.e(81125),i.e(4909),i.e(36354)]).then(i.bind(i,476602))},credits:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(64100)]).then(i.bind(i,164100))},attribution:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(45464)]).then(i.bind(i,945464))},"action-button":{load:()=>Promise.all([i.e(80774),i.e(79339),i.e(81125),i.e(23133)]).then(i.bind(i,623133))},navigation:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(69221)]).then(i.bind(i,869221))},swipe:{load:()=>Promise.all([i.e(41426),i.e(20185),i.e(20883),i.e(37280),i.e(8700),i.e(40846),i.e(33283),i.e(9443),i.e(14320),i.e(80774),i.e(68763),i.e(84398),i.e(65540),i.e(95376),i.e(46584),i.e(4575),i.e(50991),i.e(36092),i.e(22568),i.e(68546),i.e(79339),i.e(42268),i.e(46633),i.e(55187),i.e(45997),i.e(30957),i.e(77646),i.e(84450),i.e(81125),i.e(4909),i.e(58409)]).then(i.bind(i,874991))},code:{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(81125),i.e(65623),i.e(4909),i.e(87401)]).then(i.bind(i,55921))},timeline:{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(81125),i.e(65623),i.e(4909),i.e(65170)]).then(i.bind(i,838010))},"timeline-event":{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(81125),i.e(65623),i.e(4909),i.e(8893)]).then(i.bind(i,962437))},"timeline-spacer":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(76777)]).then(i.bind(i,776777))},"mobile-package":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(8636)]).then(i.bind(i,908636))},error:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(37940)]).then(i.bind(i,837940))},chart:{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(81125),i.e(65623),i.e(4909),i.e(66326)]).then(i.bind(i,150158))},grid:{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(81125),i.e(65623),i.e(4909),i.e(98445)]).then(i.bind(i,598949))},standalone:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(92815),i.e(88976)]).then(i.bind(i,588976))},"large-number":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(52986)]).then(i.bind(i,130605))}},resource:{audio:{load:()=>i.e(47808).then(i.bind(i,47808))},image:{load:()=>Promise.all([i.e(46593),i.e(48466)]).then(i.bind(i,848466))},image360:{load:()=>Promise.all([i.e(46593),i.e(48466),i.e(98512)]).then(i.bind(i,898512))},video:{load:()=>i.e(37379).then(i.bind(i,637379))},expressmap:{load:()=>Promise.all([i.e(46593),i.e(41426),i.e(20185),i.e(40846),i.e(33283),i.e(9443),i.e(14320),i.e(68763),i.e(84398),i.e(65540),i.e(53124),i.e(95376),i.e(4575),i.e(50991),i.e(36092),i.e(68546),i.e(77272),i.e(77646),i.e(81002),i.e(60808),i.e(64358),i.e(58262),i.e(66864),i.e(77977)]).then(i.bind(i,787798))},webmap:{load:()=>i.e(90599).then(i.bind(i,590599))},"story-theme":{load:()=>Promise.all([i.e(46593),i.e(48466),i.e(28135)]).then(i.bind(i,528135))},"portal-item":{load:()=>i.e(15956).then(i.bind(i,115956))},"feature-layer":{load:()=>i.e(11924).then(i.bind(i,611924))},"thematic-map-dataset":{load:()=>i.e(60805).then(i.bind(i,660805))},"express-image-data":{load:()=>i.e(83143).then(i.bind(i,83143))},font:{load:()=>Promise.resolve().then(i.bind(i,455221))},"file-item":{load:()=>i.e(54032).then(i.bind(i,354032))},"geo-data":{load:()=>i.e(64632).then(i.bind(i,64632))},json:{load:()=>i.e(5494).then(i.bind(i,205494))},"ai-metadata":{load:()=>i.e(98890).then(i.bind(i,698890))}}},n={node:{collection:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(92815),i.e(30099)]).then(i.bind(i,130099))},"collection-ui":{load:()=>Promise.all([i.e(80774),i.e(84398),i.e(95376),i.e(36092),i.e(42409),i.e(81125),i.e(54152),i.e(20339),i.e(96921),i.e(89916)]).then(i.bind(i,289916))},"collection-cover":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(88260)]).then(i.bind(i,688260))},"collection-nav":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(79130)]).then(i.bind(i,579130))},"collection-item":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(73688)]).then(i.bind(i,673688))},"collection-map":{load:()=>Promise.all([i.e(46593),i.e(80774),i.e(84398),i.e(53124),i.e(4575),i.e(36092),i.e(77646),i.e(81125),i.e(64358),i.e(66864),i.e(74065)]).then(i.bind(i,826946))}},resource:{}},o={node:{briefing:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(92815),i.e(36010),i.e(17747)]).then(i.bind(i,736010))},"briefing-ui":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(86308)]).then(i.bind(i,586308))},"briefing-slide":{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(81125),i.e(65623),i.e(4909),i.e(62249),i.e(62547),i.e(13043),i.e(55257),i.e(84473)]).then(i.bind(i,684473))},"briefing-slide-content-pane":{load:()=>Promise.all([i.e(20883),i.e(37280),i.e(80774),i.e(22568),i.e(79339),i.e(81125),i.e(65623),i.e(4909),i.e(62249),i.e(62547),i.e(55257),i.e(51654)]).then(i.bind(i,162622))}},resource:{}},a={node:{frame:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(92815),i.e(93290)]).then(i.bind(i,393290))},"frame-timeline":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(26490)]).then(i.bind(i,426490))},"frame-journey":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(65184)]).then(i.bind(i,965184))},"frame-custom":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(8690)]).then(i.bind(i,508690))},"journey-place":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(1149)]).then(i.bind(i,401149))},"journey-map":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(34866)]).then(i.bind(i,634866))},"frame-slide":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(9359)]).then(i.bind(i,331740))},"frame-narrative-panel":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(95604)]).then(i.bind(i,895604))}},resource:{}},r={node:{globe:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(55846)]).then(i.bind(i,755846))},"express-mapping":{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(56269)]).then(i.bind(i,856269))},template:{load:()=>Promise.all([i.e(80774),i.e(81125),i.e(51550)]).then(i.bind(i,451550))}},resource:{}},l=e=>({node:{...s.node,...n.node,...o.node,...a.node,...e.includeLabItems?r.node:{}},resource:{...s.resource,...n.resource,...o.resource,...a.resource,...e.includeLabItems?r.resource:{}}})},664885:(e,t,i)=>{i.d(t,{N:()=>a});var s=i(406029),n=i(455729),o=i(990493);let a=e=>class extends n.PureComponent{render(){return(0,s.jsx)(o.i.Consumer,{children:t=>(0,s.jsx)(e,{...this.props,storyOffsetContext:t})})}}},670673:(e,t,i)=>{i.d(t,{A:()=>z});var s=i(406029),n=i(94588),o=i.n(n),a=i(455729),r=i(592578),l=i(337468),c=i(630740),d=i(413175),p=i(9600),y=i(917318),m=i(894368),h=i(874400),g=i(967969);let{className:x,styles:u}={styles:(0,s.jsx)(o(),{id:"ac95417d9c6ab41d",children:".hot-key-text.jsx-ac95417d9c6ab41d{opacity:.6}"}),className:"jsx-ac95417d9c6ab41d"},b=e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.M,{...e,className:x}),u]});var A=i(934829),f=i(585810),j=i(150547),k=i(502648),v=i(332988),w=i.n(v),C=i(856097),I=i(417505);let _=e=>{let{currentNumber:t,totalNumber:i}=e,n=(0,j.A)()("viewer.briefing.slideProgress",{slideNumber:t,totalNumberOfSlides:i}),a={styles:(0,s.jsx)(o(),{id:"5c88930f8fd0dd16",dynamic:[C.Ay.typography.subtitleLarge()],children:`.briefing-progress-numbers.__jsx-style-dynamic-selector{${C.Ay.typography.subtitleLarge()}}`}),className:o().dynamic([["5c88930f8fd0dd16",[C.Ay.typography.subtitleLarge()]]])};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.Z,{srOnlyMessage:n,currentNumber:t,totalNumber:i,progressNumbersClassName:w()("briefing-progress-numbers",a.className)}),a.styles]})};var S=i(698060),P=i(777142);let $=()=>{let e=(0,j.A)(),{briefingDisplay:t,updateBriefingDisplay:i}=(0,A.r)(),{isStoryItemOutlineShowing:n}=t,a=e(n?"component.briefings.header.closeToc":"component.briefings.header.openToc"),{className:r,styles:l}={styles:(0,s.jsx)(o(),{id:"5c4f4a6aadda277b",children:'button.icon-button.briefing-toc-toggle.jsx-5c4f4a6aadda277b:not(.disabled):not([aria-haspopup])[aria-expanded="true"]>*{background-color:var(--color-bg-icon-active)}'}),className:"jsx-5c4f4a6aadda277b"};return(0,s.jsxs)(y.m_,{children:[(0,s.jsx)(y.k$,{autoARIADescribedByEnabled:!1,children:(0,s.jsx)(m.Ay,{type:"single-icon","aria-expanded":n,"aria-controls":P.Er,visuallyHiddenLabel:a,onClick:()=>{i({isStoryItemOutlineShowing:!n})},className:w()(r,"briefing-toc-toggle"),shouldInsetFocusStyle:!0,children:(0,s.jsx)(h.A,{path:S.c,size:16,shouldFlipRTL:!0})})}),(0,s.jsx)(y.ZI,{children:a}),l]})},N=e=>{let t=(0,j.A)(),{toggleHeaderSpace:i}=(0,k.N)(),n=(0,a.useCallback)(e=>{e||i(!0)},[i]),{isDocumentFullscreen:o,toggleDocumentFullscreen:c}=(0,f.eg)({onChange:n,exitFullscreenOnUnmount:!0}),d=o?r.k:l.q,g=t(o?"component.briefings.header.presentationMode.end":"component.briefings.header.presentationMode.start"),x=(0,a.useCallback)(()=>{if(!e.shouldDisablePresentationModeUI)i(!!o),c()},[c,i,o,e.shouldDisablePresentationModeUI]),u={triggerKey:"Enter",hasPrimaryModifier:!0};return(0,p.C)({...u,on:x}),(0,s.jsxs)(y.m_,{children:[(0,s.jsx)(y.k$,{autoARIADescribedByEnabled:e.shouldDisablePresentationModeUI,children:(0,s.jsx)(m.Ay,{type:"single-icon",visuallyHiddenLabel:g,onClick:x,disabled:e.shouldDisablePresentationModeUI,shouldInsetFocusStyle:!0,children:(0,s.jsx)(h.A,{path:d,size:16})})}),(0,s.jsxs)(y.ZI,{children:[g,(0,s.jsx)(b,{...u})]})]})},z=e=>{let{shouldDisablePresentationModeUI:t,shouldHidePresentationModeUI:i=!1}=e,n=(0,j.A)(),a=(0,A.r)(),{currentIndex:r,totalNumberOfSlides:l}=a.briefingDisplay;return(0,s.jsxs)("div",{className:"jsx-e575169fb66b4906 buttons-wrapper",children:[(0,s.jsx)($,{}),(0,s.jsx)(m.Ay,{type:"single-icon",visuallyHiddenLabel:n("component.briefings.header.navigation.previous"),onClick:()=>a.updateBriefingDisplay({currentIndex:r-1}),disabled:0===r,shouldInsetFocusStyle:!0,children:(0,s.jsx)(h.A,{path:c.U,size:16,shouldFlipRTL:!0})}),(0,s.jsx)(_,{currentNumber:r+1,totalNumber:l}),(0,s.jsx)(m.Ay,{type:"single-icon",visuallyHiddenLabel:n("component.briefings.header.navigation.next"),onClick:()=>a.updateBriefingDisplay({currentIndex:r+1}),disabled:r>=l-1,shouldInsetFocusStyle:!0,children:(0,s.jsx)(h.A,{path:d.b,size:16,shouldFlipRTL:!0})}),!i&&(0,s.jsx)(N,{shouldDisablePresentationModeUI:t}),(0,s.jsx)(o(),{id:"e575169fb66b4906",children:".buttons-wrapper.jsx-e575169fb66b4906{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"})]})}},702289:(e,t,i)=>{i.d(t,{m:()=>s});let s=e=>{}},713287:(e,t,i)=>{i.d(t,{A:()=>p});var s=i(406029),n=i(94588),o=i.n(n);i(455729);var a=i(332988),r=i.n(a),l=i(459358),c=i(159524),d=i(150547);let p=e=>{let{maxHeight:t=l.Ay.spacing.md,maxWidth:i=l.Ay.spacing.custom("12rem")}=e,{storyLogo:n}=(0,c.E)(),a=(0,d.A)();if(!n)return null;let p=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:n.src,alt:n.alt||a("component.storyLogo.default.altText"),className:o().dynamic([["1714b1198593fbce",[l.Ay.spacing.md,t,i]]])+" "+(r()({"is-svg":"svg"===n.fileType})||"")}),(0,s.jsx)(o(),{id:"1714b1198593fbce",dynamic:[l.Ay.spacing.md,t,i],children:`img.is-svg.__jsx-style-dynamic-selector{min-width:${l.Ay.spacing.md}}img.__jsx-style-dynamic-selector{max-height:${t};max-width:${i}}`})]});return n.link?(0,s.jsxs)("a",{href:n.link,target:"_blank",rel:"noreferrer noopener",className:"jsx-c86c0e5815b32f63",children:[p,(0,s.jsx)(o(),{id:"c86c0e5815b32f63",children:"a.jsx-c86c0e5815b32f63{line-height:0;display:inline-block}"})]}):p}},798488:(e,t,i)=>{i.d(t,{A:()=>l});var s=i(406029),n=i(455729),o=i(795669),a=i.n(o);let r=(0,n.memo)(e=>{let{children:t}=e;return(0,s.jsx)(a(),{children:(0,s.jsx)("title",{children:t},"title")})});r.displayName="BrowserTabTitle";let l=r},819625:(e,t,i)=>{i.d(t,{r:()=>s});let s="app-authentication-registration"},843759:(e,t,i)=>{let s;i.d(t,{A:()=>tn});var n=i(406029),o=i(94588),a=i.n(o),r=i(455729),l=i(332988),c=i.n(l),d=i(716450),p=i(459358),y=i(901367),m=i(54831),h=i(89826),g=i(856097),x=i(425233),u=i(351453),b=i(159004),A=i(255281),f=i(325247),j=i(230658),k=i(602422),v=i(642309),w=i(157080),C=i(642245);let I=(0,r.createContext)({isLikedByUser:!1,likesCount:0,onItemLike:void 0,onItemUnlike:void 0,showSignInModal:void 0,mostRecentLikeUser:void 0}),_=()=>(0,r.useContext)(I);var S=i(564872),P=i(241523),$=i(894368),N=i(647345),z=i(801422),T=i(150547);let L=new Map([[j.z.Story,"component.itemCard.dropdown.createStoryFromTemplate"]]),D={styles:(0,n.jsx)(a(),{id:"e79bc4f34bc31bd1",children:`.button.jsx-e79bc4f34bc31bd1{margin-inline:${p.Ay.spacing.xxxxs}}`}),className:"jsx-e79bc4f34bc31bd1"},B=()=>{let e=(0,P.ck)(),t=(0,T.A)();return e.isTemplate&&(0,N._E)(e.type)?(0,n.jsx)(z.i,{routeDef:{route:"create",itemType:e.type,template:e.itemId},children:(0,n.jsxs)($.Ay,{type:"primary",className:c()(D.className,"button"),children:[t(L.get(e.type)),D.styles]})}):null};var F=i(942203),M=i(65090),O=i(982726),U=i(874400),R=i(924099),E=i(181899),H=i(426343),V=i(356077),W=i(126966),q=i(918300),K=i(531024),Z=i(402654),G=i(393585);let Y=()=>{let{itemDetails:e}=(0,P.ck)(),[t,i]=(0,r.useState)(),[s,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),{routeTo:p}=(0,q.dA)(),y=(0,T.A)(),m=(0,W.cu)(),h=(0,K.kp)(m),{theme:x}=(0,d.df)(),{supportedLanguages:u,isLoading:b,refetchLanguages:A,isError:f}=(0,Z.X3)(),k=t=>t?.find(t=>t.id===e.id),v=async()=>{if(f){let e=await A();if("string"!=typeof e){let t=k(e);t&&i({id:t.id,culture:t.culture,label:t.label})}}if(!u||b)return void o(!0);let t=u?.find(t=>t.id===e.id);if(!t)throw Error("Selected language not found in configured languages");i({id:t.id,culture:t.culture,label:t.label}),o(!0)},w=()=>{let t=u?.find(t=>t.id===e.id);i({id:t?.id??e.id,culture:t?.culture??e.culture,label:t?.label??e.title}),o(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O.A,{target:(0,n.jsx)("div",{className:a().dynamic([["b6308bcfe29585ca",[g.Ay.typography.bodySmall(),x.colors.labelSecondary]]]),children:(0,n.jsx)(d.Pl,{defaultTheme:h,children:(0,n.jsx)(G.A,{id:"translate-btn",tooltipId:"viewer.languageSettings",icon:(0,n.jsx)(U.A,{path:M.e,size:16}),onClick:v})})}),title:y("viewer.translation.nudge.title"),placement:"bottom",isShowing:l,onClick:()=>{c(!1)}}),(0,n.jsx)(d.Pl,{defaultTheme:"light",children:(0,n.jsxs)(R.A,{headerTitle:y("viewer.languageSettings"),isShowingModal:s,primaryButtonTitle:y("builder.common.save"),onPrimaryButtonClick:()=>{if(f||!t?.id)return void o(!1);p({routeDef:(0,q.WU)({route:"viewer",itemId:t.id,itemType:j.z.Story,isTemplate:!1}),method:"push"}),o(!1)},onSecondaryButtonClick:w,onCloseButtonClick:w,secondaryButtonTitle:y("common.cancel"),closeButtonLabel:y("common.close"),children:[b&&(0,n.jsx)("div",{className:a().dynamic([["b6308bcfe29585ca",[g.Ay.typography.bodySmall(),x.colors.labelSecondary]]])+" loading",children:(0,n.jsx)(E.A,{size:m.spacing.md})}),(0,n.jsx)(V.K,{messageId:"viewer.languageSettings.error",isError:!b&&f}),u&&t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:a().dynamic([["b6308bcfe29585ca",[g.Ay.typography.bodySmall(),x.colors.labelSecondary]]]),children:y("viewer.languageSettings.description")}),(0,n.jsx)(H.A,{labelText:y("viewer.languageSettings.label"),options:u.filter(e=>!e.hasDetachedFromSource)?.map(e=>({id:e.id,culture:e.culture,label:e.label})),onChange:e=>{i(u?.find(t=>t.id===e))},selectedOptionId:t.id,currentOptionLabel:t.label,isFullWidth:!0})]})]})}),(0,n.jsx)(a(),{id:"b6308bcfe29585ca",dynamic:[g.Ay.typography.bodySmall(),x.colors.labelSecondary],children:`.loading.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:100%;width:100%}p.__jsx-style-dynamic-selector{${g.Ay.typography.bodySmall()}          color: ${x.colors.labelSecondary};margin:0}`})]})};var X=i(390248),J=i(639151),Q=i(501711),ee=i(330653),et=i(83811),ei=i(191952),es=i(868349),en=i(391019),eo=i(690314),ea=i(342754),er=i(927106),el=i(249802),ec=i(824998),ed=i(652266),ep=i(638096);class ey extends ep.I{constructor(e){super(e,{iconName:"heart",path:"",viewBox:"0 0 16 16",children:()=>(0,n.jsx)("path",{d:"M8.00047 13.6497L2.19047 7.88975C0.660469 6.35975 0.660469 3.66975 2.19047 2.12975C2.93047 1.37975 3.92047 0.969748 4.96047 0.969748C6.01047 0.969748 6.99047 1.37975 7.74047 2.12975L8.00047 2.39975L8.26047 2.12975C8.62312 1.76083 9.05588 1.46816 9.5333 1.26895C10.0107 1.06974 10.5232 0.968011 11.0405 0.969748C12.0905 0.969748 13.0705 1.37975 13.8105 2.12975C15.3405 3.65975 15.3405 6.34975 13.8105 7.87975L7.99047 13.6397L8.00047 13.6497Z",strokeLinejoin:"round"})})}}var em=i(54302),eh=i(254033),eg=i(239663),ex=i(367875),eu=i(935686),eb=i(917318);let eA=(0,r.forwardRef)((e,t)=>{let i=(0,T.A)();e.iconPath||e.icon;let s=(0,n.jsxs)(el.A.Item,{isFullWidth:!0,onClick:e.onClick,link:e.link,ref:t,isDisabled:!!e.disabledTooltipId,children:[(0,n.jsxs)("div",{className:a().dynamic([["e66519329134b137",[p.Ay.spacing.xs]]])+" menu-item",children:[e.icon,e.iconPath&&(0,n.jsx)(U.A,{size:16,path:e.iconPath,"aria-hidden":!0}),(0,n.jsx)("p",{className:a().dynamic([["e66519329134b137",[p.Ay.spacing.xs]]]),children:e.text}),e.appendedUI]}),(0,n.jsx)(a(),{id:"e66519329134b137",dynamic:[p.Ay.spacing.xs],children:`.menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}p.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;-webkit-margin-start:${p.Ay.spacing.xs};-moz-margin-start:${p.Ay.spacing.xs};margin-inline-start:${p.Ay.spacing.xs}}`})]});return e.disabledTooltipId?(0,n.jsxs)(eb.m_,{children:[(0,n.jsx)(eb.k$,{children:s}),(0,n.jsx)(eb.ZI,{children:i(e.disabledTooltipId)})]}):s});class ef extends r.PureComponent{render(){let e=this.getStartItems(),t=this.getCenterItems(),i=this.getEndItems(),s=e.length>0&&(t.length>0||i.length>0),o=t.length>0&&i.length>0,a=[...e,...s?[(0,n.jsx)(el.A.Divider,{},"start-divider")]:[],...t,...o?[(0,n.jsx)(el.A.Divider,{},"center-divider")]:[],...i];return 0===a.length?null:(0,n.jsxs)(ec.AM,{autoPlacementOptions:{allowedPlacements:[this.props.storyItem.type===j.z.Frame?"top-end":"bottom-end"]},children:[(0,n.jsx)(ec.Wv,{autoARIADescribedByEnabled:!1,autoARIALabelledByEnabled:!1,skipButtonWrapper:!0,children:this.renderTarget()}),(0,n.jsx)(ec.hl,{floatingFocusManagerProps:{initialFocus:1},closeOnClick:!0,children:(0,n.jsx)(el.A,{disabled:"embedded-preview"===this.props.mode,children:a})})]})}get canShowDuplicateOptions(){return this.props.isViewportMinWidth("large")&&(0,em.bv)({itemDetails:this.props.storyItem.itemDetails,authManager:this.props.authManager})}constructor(...e){super(...e),this.getStartItems=()=>{let e=[];if(this.props.canEdit&&this.props.isViewportMinWidth("large")){let t=this.getEditContent();e.push(t)}return e},this.getCenterItems=()=>{let e=[];if(this.props.storyItem.type===j.z.Frame||this.props.isViewportMaxWidth("small")&&(this.props.storyItem.type===j.z.Story||this.props.storyItem.type===j.z.Collection)){let t=this.getViewLikesContent();t&&e.push(t)}if(this.props.favoriteContent&&e.push(this.props.favoriteContent),this.props.isViewportMinWidth("medium")&&this.props.storyItem.type!==j.z.Frame&&!this.props.shouldHideAutoPlay){let t=this.getAutoplayContent();e.push(t)}if(this.props.isViewportMinWidth("medium")&&(this.props.storyItem.type===j.z.Story||this.props.storyItem.type===j.z.Briefing)){let t=this.getPrintPreviewContent();e.push(t)}if(this.props.storyItem.type===j.z.Collection&&"string"==typeof this.props.itemHref){let t=this.getOpenItemContent(this.props.itemHref);e.push(t)}if(this.props.onEmbedClicked){let t=this.getEmbedContent();e.push(t)}if(this.props.featureDecisions.canReportAbuse){let t=this.getReportAbuseContent();t&&e.push(t)}return e},this.getEndItems=()=>{let e=[],t=this.getDuplicateItemContent(),i=this.getDuplicateAsTemplateContent();return t&&e.push(t),i&&e.push(i),e},this.renderTarget=()=>(0,n.jsx)(G.A,{id:"context-menu-btn",tooltipId:"common.moreActions",icon:(0,n.jsx)(U.A,{path:Q.r,size:16,"aria-hidden":!0}),isRenderedInFrameOrBriefing:this.props.storyItem.type===j.z.Frame||this.props.storyItem.type===j.z.Briefing}),this.getEditContent=()=>{let{storyItem:e}=this.props;return(0,n.jsx)(z.i,{routeDef:(0,q.WU)({route:"builder",itemType:e.type,itemId:e.itemId,isTemplate:e.isTemplate}),children:(0,n.jsx)(eA,{text:(0,n.jsx)(X.A,{id:this.props.storyItem.isTemplate?"component.viewerHeader.edit.template":this.props.storyItem.type===j.z.Story?"component.viewerHeader.edit":this.props.storyItem.type===j.z.Collection?"component.myCollections.builder.edit":"component.viewerHeader.edit.briefing"}),appendedUI:this.props.publishIndicator&&(0,n.jsx)("div",{className:"indicator-container",children:this.props.publishIndicator}),iconPath:ee.$})},"edit")},this.getDuplicateItemContent=()=>{if(!this.canShowDuplicateOptions||!this.props.onDuplicateClicked)return null;let e=(0,em.Bj)({itemDetails:this.props.storyItem.itemDetails,authManager:this.props.authManager,storyMapUserPrivileges:this.props.storyMapUserPrivileges});return(0,n.jsx)(eA,{onClick:this.props.onDuplicateClicked,iconPath:et.h,text:(0,n.jsx)(X.A,{id:this.props.storyItem.isTemplate?"component.builderHeader.duplicateItem.template.dropdown":({[j.z.Story]:"component.builderHeader.duplicateItem.story.dropdown",[j.z.Briefing]:"component.builderHeader.duplicateItem.briefing.dropdown",[j.z.Collection]:"component.builderHeader.duplicateItem.collection.dropdown",[j.z.Frame]:"component.builderHeader.duplicateItem.briefing.dropdown",[j.z.Theme]:"component.builderHeader.duplicateItem.theme.dropdown"})[this.props.storyItem.type]}),disabledTooltipId:e?void 0:"publicAccount.disabled"},"duplicate-viewer")},this.getDuplicateAsTemplateContent=()=>{let e=this.props.storyItem.type;if(!this.canShowDuplicateOptions||!this.props.featureDecisions.canUseTemplates||this.props.storyItem.isTemplate||!(0,N._E)(e))return null;let t={route:"create-template",itemType:e,template:this.props.storyItem.itemId};return(0,n.jsx)(z.i,{routeDef:t,children:(0,n.jsx)(eA,{link:{href:this.props.storyRouting.getUrlFromRouteDef(t),openInNewPage:!1},iconPath:ei.I,text:(0,n.jsx)(X.A,{id:"builder.common.duplicateAsTemplate"}),disabledTooltipId:this.props.storyMapUserPrivileges.canCreateTemplate&&(0,em.Bj)({itemDetails:this.props.storyItem.itemDetails,authManager:this.props.authManager,storyMapUserPrivileges:this.props.storyMapUserPrivileges})?void 0:"publicAccount.disabled"})},"duplicate-as-template")},this.getEmbedContent=()=>{let e=(0,K.yJ)(this.props.storyItem.type);return(0,n.jsx)(eA,{iconPath:es.n,text:(0,n.jsx)(X.A,{id:e}),onClick:this.onEmbedClicked},"embed-story")},this.getOpenItemContent=e=>(0,n.jsx)(eA,{iconPath:en.N,text:(0,n.jsx)(X.A,{id:"builder.common.openNewTab"}),link:{href:e,openInNewPage:!0}},"open-item-in-new-tab"),this.onClickAutoplay=()=>{let e=this.props.storyItem.type===j.z.Collection?eh.A.Name.Viewer_Autoplay_Collection:this.props.storyItem.type===j.z.Story?eh.A.Name.Viewer_Autoplay_Story:eh.A.Name.Viewer_Autoplay_Briefing;eh.A.trackEvent(eh.A.Category.Viewer,eh.A.Action.Viewer_Autoplay,e),this.props.enableAutoplay()},this.getAutoplayContent=()=>this.props.isAutoplayEnabled?(0,n.jsx)(eA,{onClick:this.props.disableAutoplay,iconPath:eo.e,text:(0,n.jsx)(X.A,{id:"component.viewerHeader.storySettings.disable.autoplay"})},"disable-autoplay"):(0,n.jsx)(eA,{onClick:this.onClickAutoplay,iconPath:eo.e,text:(0,n.jsx)(X.A,{id:"component.viewerHeader.storySettings.enable.autoplay"})},"enable-autoplay"),this.getPrintPreviewContent=()=>(0,n.jsx)(eA,{onClick:this.onRequestPrint,iconPath:ea.S,text:(0,n.jsx)(X.A,{id:"common.printPreview"}),appendedUI:(0,n.jsx)(ed.WU,{tooltip:this.props.intl.formatMessage({id:"common.printPreview.tooltip"}),dimension:"small"})},"print-preview"),this.onRequestPrint=()=>{(this.props.storyItem.type===j.z.Story||this.props.storyItem.type===j.z.Briefing)&&(window.location.href=this.props.storyRouting.getUrlFromRouteDef((0,q.WU)({route:"print",printMode:"view"===this.props.mode?"published":"preview",itemType:this.props.storyItem.type,itemId:this.props.storyItem.itemId,isTemplate:this.props.storyItem.isTemplate})))},this.getReportAbuseContent=()=>{let e=(0,eg.Ni)({getUrlFromRouteDef:this.props.storyRouting.getUrlFromRouteDef});if(e)return(0,n.jsx)(eA,{iconPath:er.w,text:(0,n.jsx)(X.A,{id:"component.viewerHeader.storySettings.reportAbuse"}),link:{href:e,openInNewPage:!0}},"report-abuse")},this.getViewLikesContent=()=>{if(0!==this.props.likesCount)return(0,n.jsx)(eA,{icon:(0,n.jsx)(ey,{width:p.Ay.spacing.xxs,height:p.Ay.spacing.xxs,fill:"transparent",stroke:"currentColor","aria-hidden":!0}),text:(0,n.jsx)(X.A,{id:"component.frameActionBar.contextMenu.viewLikes"}),onClick:this.props.showLikesModal},"view-likes")},this.onEmbedClicked=()=>{this.props.onEmbedClicked?.()}}}let ej=(0,q.PX)((0,m.S9)((0,u.Fo)((0,eu.Lr)((s=(0,ex.A)((0,J.Ay)((0,h.hB)(ef))),e=>(0,n.jsx)(I.Consumer,{children:t=>(0,n.jsx)(s,{...e,...t})}))))));var ek=i(189650),ev=i.n(ek),ew=i(738323),eC=i(328202);let eI=e=>{let{addStringId:t,removeStringId:i,filledIconPath:s,unfilledIconPath:o}=(0,ew.w)(),{isFavorite:a,onItemFavorite:l,onItemUnfavorite:c,showSignInModal:d}=(0,eC.nm)(),{authManager:p}=(0,h.Py)(),y=(0,r.useMemo)(()=>ev()(()=>{p?a?c():l():d?.()},500),[p,a,l,c,d]);return(0,n.jsx)(G.A,{id:"fav-btn",tooltipId:a?i:t,onClick:y,icon:(0,n.jsx)(U.A,{path:a?s:o,size:16}),isRenderedInlineInStory:e.isRenderedInlineInStory,isRenderedInFrameOrBriefing:e.isRenderedInFrameOrBriefing})},e_=()=>{let{addStringId:e,removeStringId:t,filledIconPath:i,unfilledIconPath:s}=(0,ew.w)(),{isFavorite:o,onItemFavorite:a,onItemUnfavorite:l,showSignInModal:c}=(0,eC.nm)(),{authManager:d}=(0,h.Py)(),p=(0,r.useMemo)(()=>ev()(()=>{d?o?l():a():c?.()},500),[d,o,a,l,c]);return(0,n.jsx)(eA,{onClick:p,iconPath:o?i:s,text:(0,n.jsx)(X.A,{id:o?t:e})})};var eS=i(398297);let eP=e=>{let{onFrameRestartClick:t}=e;return(0,n.jsx)(G.A,{id:"frame-reset-btn",tooltipId:"component.frames.viewer.action.reset",onClick:()=>{eh.A.trackEvent(eh.A.Category.Viewer,eh.A.Action.Frames_Restart,j.z.Frame),t()},icon:(0,n.jsx)(U.A,{size:16,path:eS.v}),isRenderedInFrameOrBriefing:!0})};var e$=i(890510),eN=i(167791),ez=i(153072),eT=i(717236);let eL=e=>{let{isRenderedInline:t,isRenderedInNativeApp:i,itemOwner:s}=e,{authManager:o}=(0,h.Py)(),r=(0,T.A)(),{isLikedByUser:l,likesCount:y,showSignInModal:m,showLikesModal:x,mostRecentLikeUser:u}=_(),b=(0,W.cu)(),{theme:A}=(0,d.df)(),{BASE_URL:f}=(0,ez.UK)(),j=(0,eN.st)(),k=!!o,{foregroundColor:v}=(0,eT.G)({themeVariables:b,websiteTheme:A,flavor:t?"story":void 0}),w=u?.fullName??"",C={route:"profile",profileSlug:u?.udn??""},I=k&&y>0&&w&&!l,S=o?.username===s&&0===y,P=()=>1===y?"viewer.likeCount.oneLike":"viewer.likeCount.xLikes",$=()=>{switch(y){case 0:return"viewer.like.signInModal.noOneHasLikedThisItemYet";case 1:return"viewer.unauthenticated.likeCount.onePersonLikedThisItem";default:return"viewer.unauthenticated.likeCount.xPeopleLikedThisItem"}},N=()=>{switch(y){case 0:return{count:y,likedByUser:"viewer.like.signInModal.noOneHasLikedThisItemYet",notLikedByUser:"viewer.like.signInModal.noOneHasLikedThisItemYet"};case 1:return{count:y,likedByUser:"viewer.authenticated.likeCount.youLikedThisItem",notLikedByUser:"viewer.authenticated.likeCount.onePersonLikedThisItem"};case 2:return{count:y-1,likedByUser:"viewer.authenticated.likeCount.youAndOneOtherLikedThisItem",notLikedByUser:"viewer.authenticated.likeCount.personAndOneOtherLikedThisItem"};default:return{count:y-1,likedByUser:"viewer.authenticated.likeCount.youAndXOthersLikedThisItem",notLikedByUser:"viewer.authenticated.likeCount.personAndXOthersLikedThisItem"}}},L=()=>k?x?.():m?.(),{stringId:D,count:B}=(()=>{if(!t)return{stringId:P(),count:y};if(k){let e=N();return{stringId:l?e.likedByUser:e.notLikedByUser,count:e.count}}return{stringId:$(),count:y}})();return(0,n.jsxs)(n.Fragment,{children:[t?(0,n.jsxs)("div",{className:a().dynamic([["3ab10693fc04c00c",[v,g.Ay.typography.labelSmall(),b.bodyColor,g.Ay.typography.caption(),p.Ay.spacing.xxxs,p.Ay.spacing.xxxxs,p.Ay.font.weight.medium,p.Ay.spacing.xxs,p.Ay.spacing.xxs,p.Ay.spacing.xxxs]]])+" "+(c()("inline-message",{"has-avatar":I})||""),children:[I&&!i&&(0,n.jsx)(z.i,{routeDef:C,children:(0,n.jsx)("a",{...j.getDataAttributes({name:"Inline likes message",content:"Author profile"}),className:a().dynamic([["3ab10693fc04c00c",[v,g.Ay.typography.labelSmall(),b.bodyColor,g.Ay.typography.caption(),p.Ay.spacing.xxxs,p.Ay.spacing.xxxxs,p.Ay.font.weight.medium,p.Ay.spacing.xxs,p.Ay.spacing.xxs,p.Ay.spacing.xxxs]]]),children:(0,n.jsx)("img",{src:u?.thumbnailUrl||`${f}/static/images/blank-avatar.svg`,alt:r("viewer.likesModal.userThumbnail.alt",{fullName:w}),className:a().dynamic([["3ab10693fc04c00c",[v,g.Ay.typography.labelSmall(),b.bodyColor,g.Ay.typography.caption(),p.Ay.spacing.xxxs,p.Ay.spacing.xxxxs,p.Ay.font.weight.medium,p.Ay.spacing.xxs,p.Ay.spacing.xxs,p.Ay.spacing.xxxs]]])})})}),I&&i&&(0,n.jsx)("img",{src:u?.thumbnailUrl||`${f}/static/images/blank-avatar.svg`,alt:r("viewer.likesModal.userThumbnail.alt",{fullName:w}),className:a().dynamic([["3ab10693fc04c00c",[v,g.Ay.typography.labelSmall(),b.bodyColor,g.Ay.typography.caption(),p.Ay.spacing.xxxs,p.Ay.spacing.xxxxs,p.Ay.font.weight.medium,p.Ay.spacing.xxs,p.Ay.spacing.xxs,p.Ay.spacing.xxxs]]])}),!S&&(0,n.jsx)("span",{className:a().dynamic([["3ab10693fc04c00c",[v,g.Ay.typography.labelSmall(),b.bodyColor,g.Ay.typography.caption(),p.Ay.spacing.xxxs,p.Ay.spacing.xxxxs,p.Ay.font.weight.medium,p.Ay.spacing.xxs,p.Ay.spacing.xxs,p.Ay.spacing.xxxs]]]),children:r(D,{strong:e=>(0,n.jsx)("strong",{className:a().dynamic([["3ab10693fc04c00c",[v,g.Ay.typography.labelSmall(),b.bodyColor,g.Ay.typography.caption(),p.Ay.spacing.xxxs,p.Ay.spacing.xxxxs,p.Ay.font.weight.medium,p.Ay.spacing.xxs,p.Ay.spacing.xxs,p.Ay.spacing.xxxs]]]),children:e}),link:e=>i?e:(0,n.jsx)(z.i,{routeDef:C,children:(0,n.jsx)("a",{...j.getDataAttributes({name:"Inline likes message",content:"Author profile"}),className:a().dynamic([["3ab10693fc04c00c",[v,g.Ay.typography.labelSmall(),b.bodyColor,g.Ay.typography.caption(),p.Ay.spacing.xxxs,p.Ay.spacing.xxxxs,p.Ay.font.weight.medium,p.Ay.spacing.xxs,p.Ay.spacing.xxs,p.Ay.spacing.xxxs]]]),children:e})}),modal:e=>i?e:(0,n.jsx)("button",{onClick:L,...j.getDataAttributes({name:"Number of likes - story inline",content:k?"Likes modal":"Sign in modal"}),className:a().dynamic([["3ab10693fc04c00c",[v,g.Ay.typography.labelSmall(),b.bodyColor,g.Ay.typography.caption(),p.Ay.spacing.xxxs,p.Ay.spacing.xxxxs,p.Ay.font.weight.medium,p.Ay.spacing.xxs,p.Ay.spacing.xxs,p.Ay.spacing.xxxs]]]),children:e}),number:(0,n.jsx)(e$.Gr,{value:B}),fullName:w})})]}):(0,n.jsx)("button",{onClick:L,...j.getDataAttributes({name:"Number of likes - viewer header",content:k?"Likes modal":"Sign in modal"}),className:a().dynamic([["3ab10693fc04c00c",[v,g.Ay.typography.labelSmall(),b.bodyColor,g.Ay.typography.caption(),p.Ay.spacing.xxxs,p.Ay.spacing.xxxxs,p.Ay.font.weight.medium,p.Ay.spacing.xxs,p.Ay.spacing.xxs,p.Ay.spacing.xxxs]]])+" header-message",children:r(D,{number:(0,n.jsx)(e$.Gr,{value:B})})}),(0,n.jsx)(a(),{id:"3ab10693fc04c00c",dynamic:[v,g.Ay.typography.labelSmall(),b.bodyColor,g.Ay.typography.caption(),p.Ay.spacing.xxxs,p.Ay.spacing.xxxxs,p.Ay.font.weight.medium,p.Ay.spacing.xxs,p.Ay.spacing.xxs,p.Ay.spacing.xxxs],children:`.header-message.__jsx-style-dynamic-selector{color:${v};${g.Ay.typography.labelSmall()}}.inline-message.__jsx-style-dynamic-selector,.inline-message.__jsx-style-dynamic-selector a.__jsx-style-dynamic-selector{color:${b.bodyColor}}.inline-message.__jsx-style-dynamic-selector{${g.Ay.typography.caption()}          display: flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:${p.Ay.spacing.xxxs}}.inline-message.has-avatar.__jsx-style-dynamic-selector{margin:${p.Ay.spacing.xxxxs}}strong.__jsx-style-dynamic-selector{font-weight:${p.Ay.font.weight.medium}}a.__jsx-style-dynamic-selector{text-decoration:none}.__jsx-style-dynamic-selector:is(a,button):is(:hover,:focus){text-decoration:underline}img.__jsx-style-dynamic-selector{width:${p.Ay.spacing.xxs};height:${p.Ay.spacing.xxs};-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;-o-object-fit:contain;object-fit:contain;margin:${p.Ay.spacing.xxxs};display:block}`})]})},eD=e=>{let{isRenderedInlineInStory:t,isRenderedInFrameOrBriefing:i,itemOwner:s,className:o}=e,{authManager:l}=(0,h.Py)(),{isLikedByUser:d,likesCount:y,onItemLike:x,onItemUnlike:u,showSignInModal:b}=_(),{isViewportMaxWidth:A}=(0,m.Ye)(),f=y>0,j=A("small"),k=f&&(i||j&&!t);(0,r.useEffect)(()=>()=>{I.cancel()},[]);let v=!!l,w=p.Ay.spacing.xxs,C=d?"viewer.unlike.tooltip":"viewer.like.tooltip",I=(0,r.useMemo)(()=>ev()(()=>{v?d?u?.():x?.():b?.()},500),[d,v,x,u,b]),S=()=>(0,n.jsx)(ey,{width:w,height:w,stroke:"currentColor",fill:d?"#E54867":"transparent","aria-hidden":!0});return(0,n.jsxs)("div",{className:a().dynamic([["48f5ece5c439bead",[p.Ay.spacing.custom("1.2rem")]]])+" "+(c()("like-details-container",o)||""),children:[(0,n.jsx)(G.A,{id:"like-btn",tooltipId:C,onClick:I,icon:k?(0,n.jsxs)("div",{className:a().dynamic([["8033b6bde6e5f5f6",[p.Ay.spacing.xxxxs,g.Ay.typography.labelLarge({skip:["line-height"]})]]])+" like-heart-icon",children:[S(),(0,n.jsx)("p",{className:a().dynamic([["8033b6bde6e5f5f6",[p.Ay.spacing.xxxxs,g.Ay.typography.labelLarge({skip:["line-height"]})]]])+" like-count",children:(0,n.jsx)(e$.Gr,{value:y})}),(0,n.jsx)(a(),{id:"8033b6bde6e5f5f6",dynamic:[p.Ay.spacing.xxxxs,g.Ay.typography.labelLarge({skip:["line-height"]})],children:`.like-heart-icon.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:${p.Ay.spacing.xxxxs}}.like-count.__jsx-style-dynamic-selector{${g.Ay.typography.labelLarge({skip:["line-height"]})}        }`})]}):S(),isRenderedInlineInStory:t,isRenderedInFrameOrBriefing:i,isDisabled:l?.username===s,disabledTooltipId:"viewer.like.disabled.tooltip"}),f&&!i&&!j&&!t&&(0,n.jsx)("div",{className:a().dynamic([["48f5ece5c439bead",[p.Ay.spacing.custom("1.2rem")]]])+" expanded-count",children:(0,n.jsx)(eL,{isRenderedInline:!1,itemOwner:s})}),(0,n.jsx)(a(),{id:"48f5ece5c439bead",dynamic:[p.Ay.spacing.custom("1.2rem")],children:`.like-details-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.expanded-count.__jsx-style-dynamic-selector{-webkit-margin-end:${p.Ay.spacing.custom("1.2rem")};-moz-margin-end:${p.Ay.spacing.custom("1.2rem")};margin-inline-end:${p.Ay.spacing.custom("1.2rem")}}`})]})};var eB=i(766216),eF=i(335274),eM=i(531095),eO=i(419688),eU=i(122223),eR=i(914367),eE=i(664562),eH=i(583886),eV=i(278040),eW=i(680097),eq=i(760151),eK=i(551339),eZ=i(240188);function eG(e){return(0,n.jsxs)("div",{className:a().dynamic([["828169f9c6d72d80",[e.background,p.Ay.spacing.xxxs]]])+" copy-link-container",children:[(0,n.jsx)(U.A,{path:e.path,size:32,fill:e.fill}),(0,n.jsx)(a(),{id:"828169f9c6d72d80",dynamic:[e.background,p.Ay.spacing.xxxs],children:`.copy-link-container.__jsx-style-dynamic-selector{background:${e.background};-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;padding:${p.Ay.spacing.xxxs}}`})]})}function eY(e){let{appTitle:t,itemUrl:i,onCopyLink:s}=e,[o,l]=(0,r.useState)(!1),c=(0,T.A)(),y=(0,P.ck)(),{theme:m,productVariables:h}=(0,d.df)(),{TWITTER_HANDLE:x,TWITTER_HASHTAGS:u}=(0,ez.UK)(),b=`calc(2 * ${p.Ay.spacing.xs})`,A=[{key:"copy-link",icon:(0,n.jsx)(eG,{fill:m.colors.labelPrimary,path:eH.a,background:h.colors.link200}),onClick:()=>s(),title:c("common.copyLink")},...y.type===j.z.Briefing?[{key:"copy-slide-link",icon:(0,n.jsx)(eG,{fill:m.colors.labelPrimary,path:eV.k,background:m.colors.surfaceDefaultStrong}),onClick:()=>s(!0),title:c("common.copyLinkToSlide")}]:[],{key:"facebook",icon:(0,n.jsx)(eq.j,{...(0,eO.MH)(b)}),onClick:()=>(0,eR._i)(i),title:c("common.facebook")},{key:"x",icon:(0,n.jsx)(eZ.k,{...(0,eO.MH)(b)}),onClick:()=>(0,eR.b3)({appTitle:t,itemUrl:i,handle:x,hashtags:u}),title:"X"},{key:"linkedin",icon:(0,n.jsx)(eK.$,{...(0,eO.MH)(b)}),onClick:()=>(0,eR.Of)(),title:c("common.linkedIn")}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:a().dynamic([["e161dfd19486d227",[g.Ay.center("column"),p.Ay.spacing.xxxs,m.colors.labelSecondary,g.Ay.typography.caption(),g.Ay.center("row"),p.Ay.spacing.xxs,p.Ay.spacing.sm,g.Ay.center("column"),p.Ay.spacing.xxxs,p.Ay.spacing.xxl]]])+" sharing-container",children:A.map(e=>{let{key:t,icon:i,title:s,onClick:o}=e;return(0,n.jsxs)("button",{onClick:o,className:a().dynamic([["e161dfd19486d227",[g.Ay.center("column"),p.Ay.spacing.xxxs,m.colors.labelSecondary,g.Ay.typography.caption(),g.Ay.center("row"),p.Ay.spacing.xxs,p.Ay.spacing.sm,g.Ay.center("column"),p.Ay.spacing.xxxs,p.Ay.spacing.xxl]]])+" sharing-option",children:[i,s]},t)})}),(0,n.jsxs)("div",{className:a().dynamic([["e161dfd19486d227",[g.Ay.center("column"),p.Ay.spacing.xxxs,m.colors.labelSecondary,g.Ay.typography.caption(),g.Ay.center("row"),p.Ay.spacing.xxs,p.Ay.spacing.sm,g.Ay.center("column"),p.Ay.spacing.xxxs,p.Ay.spacing.xxl]]])+" container",children:[(0,n.jsx)("p",{className:a().dynamic([["e161dfd19486d227",[g.Ay.center("column"),p.Ay.spacing.xxxs,m.colors.labelSecondary,g.Ay.typography.caption(),g.Ay.center("row"),p.Ay.spacing.xxs,p.Ay.spacing.sm,g.Ay.center("column"),p.Ay.spacing.xxxs,p.Ay.spacing.xxl]]]),children:c("component.socialSharing.qrCode.description")}),!o&&(0,n.jsx)(eW.r,{data:i,size:130,onError:()=>l(!0)})]}),(0,n.jsx)(a(),{id:"e161dfd19486d227",dynamic:[g.Ay.center("column"),p.Ay.spacing.xxxs,m.colors.labelSecondary,g.Ay.typography.caption(),g.Ay.center("row"),p.Ay.spacing.xxs,p.Ay.spacing.sm,g.Ay.center("column"),p.Ay.spacing.xxxs,p.Ay.spacing.xxl],children:`.container.__jsx-style-dynamic-selector{${g.Ay.center("column")}          gap: ${p.Ay.spacing.xxxs};-webkit-box-align:start;-webkit-align-items:start;-moz-box-align:start;-ms-flex-align:start;align-items:start;color:${m.colors.labelSecondary};${g.Ay.typography.caption()}}.sharing-container.__jsx-style-dynamic-selector{${g.Ay.center("row")}          align-items: start;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;gap:${p.Ay.spacing.xxs};margin-bottom:${p.Ay.spacing.sm}}.sharing-option.__jsx-style-dynamic-selector{${g.Ay.center("column")}          gap: ${p.Ay.spacing.xxxs};width:${p.Ay.spacing.xxl}}`})]})}function eX(e){let{activeNodeId:t,appTitle:i,isShowing:s,onClose:o,itemUrl:a}=e,[l,c]=(0,r.useState)(),{toast:d}=(0,eF.dj)(),{isPortal:p}=(0,eU.EN)(),y=(0,P.ck)(),m=(0,T.A)();async function h(e){return e&&t?await (0,eR.L$)({longUrl:`${a}#ref-${t}`,shouldUseShortUrl:!1}):l||await (0,eO.Sc)(a,p)}async function g(e){let t=await h(e);await (0,eR.eE)({url:t||a,toast:d,itemType:y.type})}(0,r.useEffect)(()=>{(async()=>{l||c(await (0,eO.Sc)(a,p))})()},[s,l]);let x=[{id:"share",title:m("common.shareItem"),modalProperties:[{id:"share-options",customComponent:(0,n.jsx)(eY,{appTitle:i,itemUrl:a,onCopyLink:g})}]},{id:"embed",title:m("builder.common.embed"),modalProperties:[{id:"embed-options",customComponent:(0,n.jsx)(eE.C,{})}]}];return(0,n.jsx)(eM.A,{isShowingModal:s,mediaTitle:m("component.socialSharing.modal.title"),tabs:x,onConfirm:o,onDiscard:o,isSaveDisabled:!1,saveButtonContent:m("common.done")})}let eJ=function(e){let[t,i]=(0,r.useState)(!1),s=(0,P.ck)(),{getUrlFromRouteDef:o}=(0,q.dA)(),a=(0,r.useMemo)(()=>o((0,q.WU)({route:"viewer",itemType:s.type,itemId:s.itemId,isTemplate:s.isTemplate})),[s]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.A,{id:"social-sharing-btn",tooltipId:"common.shareItem",icon:(0,n.jsx)(U.A,{path:eB.c,size:16}),isDisabled:e.isDisabled,isRenderedInlineInStory:e.isRenderedInlineInStory,isRenderedInFrameOrBriefing:e.isRenderedInFrameOrBriefing,onClick:()=>i(!0)}),(0,n.jsx)(eX,{activeNodeId:e.getActiveNodeId?.(),appTitle:e.appTitle,isShowing:t,onClose:()=>i(!1),itemUrl:a})]})};var eQ=i(947),e0=i(405898),e8=i(857588);let e5=e=>{let[t,i]=(0,r.useState)(),s=(0,T.A)(),{theme:o}=(0,d.df)(),{translateContentIntoLocale:l,submitTranslationFeedback:c}=(0,C.Ut)(),y=!t||0===t.localeCompare(e.locale,"en-US",{sensitivity:"base"});return(0,n.jsxs)(R.A,{headerTitle:s("component.languageModal.title"),isShowingModal:e.isOpen,primaryButtonTitle:s("builder.common.save"),secondaryButtonTitle:s("common.close"),onPrimaryButtonClick:()=>{e.onClose(),t&&l(t)},isPrimaryButtonDisabled:y,onSecondaryButtonClick:e.onClose,onCloseButtonClick:e.onClose,closeButtonLabel:s("common.close"),children:[(0,n.jsxs)("fieldset",{className:a().dynamic([["7c0a599269dd69bb",[g.Ay.overflowWrap({shouldApplyWordBreak:!0}),o.colors.labelSecondary,p.Ay.spacing.xxs,g.Ay.typography.bodyLarge(),g.Ay.typography.labelLarge(),p.Ay.spacing.xxs,o.colors.labelLink]]]),children:[(0,n.jsx)("legend",{className:a().dynamic([["7c0a599269dd69bb",[g.Ay.overflowWrap({shouldApplyWordBreak:!0}),o.colors.labelSecondary,p.Ay.spacing.xxs,g.Ay.typography.bodyLarge(),g.Ay.typography.labelLarge(),p.Ay.spacing.xxs,o.colors.labelLink]]]),children:s("component.languageModal.description")}),(0,n.jsx)(e8.A,{languages:e.languages,locale:e.locale,onLocaleChange:i}),(0,n.jsx)("button",{onClick:()=>{e.onClose(),c()},className:a().dynamic([["7c0a599269dd69bb",[g.Ay.overflowWrap({shouldApplyWordBreak:!0}),o.colors.labelSecondary,p.Ay.spacing.xxs,g.Ay.typography.bodyLarge(),g.Ay.typography.labelLarge(),p.Ay.spacing.xxs,o.colors.labelLink]]])+" feedback-button",children:s("common.translationFeedback")})]}),(0,n.jsx)(a(),{id:"7c0a599269dd69bb",dynamic:[g.Ay.overflowWrap({shouldApplyWordBreak:!0}),o.colors.labelSecondary,p.Ay.spacing.xxs,g.Ay.typography.bodyLarge(),g.Ay.typography.labelLarge(),p.Ay.spacing.xxs,o.colors.labelLink],children:`fieldset.__jsx-style-dynamic-selector{min-width:0;${g.Ay.overflowWrap({shouldApplyWordBreak:!0})}}legend.__jsx-style-dynamic-selector{color:${o.colors.labelSecondary};margin-bottom:${p.Ay.spacing.xxs};${g.Ay.typography.bodyLarge()}}.feedback-button.__jsx-style-dynamic-selector{display:block;${g.Ay.typography.labelLarge()}          margin-top: ${p.Ay.spacing.xxs};color:${o.colors.labelLink}}`})]})},e9=e=>(0,n.jsx)(d.Pl,{defaultTheme:"light",children:(0,n.jsx)(e5,{...e})});var e6=i(166839),e1=i(734311);let e3="viewer-translation",e4="dismissed-nudge",e2=e=>{(0,e1.ZB)({name:e3,id:e4,value:e})},e7=()=>(0,e1.Lg)({name:e3,id:e4}),te=()=>{let[e,t]=(0,r.useState)(!1),i=(0,r.useCallback)(()=>{e2(!0),t(!1)},[]);return(0,r.useEffect)(()=>{e7()||t(!0)},[]),{isTranslationNudgeVisible:e,dismissTranslationNudge:i}},tt=e=>{let{originalLanguageCode:t,availableTranslationLocales:i}=e,s=(0,r.useRef)(!1),o=(0,T.A)(),{theme:a}=(0,d.df)(),{toast:l}=(0,eF.dj)(),{currentLanguageInfo:c,allSupportedLanguages:p}=(0,C.Ut)();(0,r.useEffect)(()=>{!s.current&&c&&i.includes(c.culture.toLocaleLowerCase("en-US"))&&(0,b.KN)(c.culture,p)!==t&&(l.add({title:o("viewer.translation.toast.machineTranslate",{languageName:c.localizedName}),type:"success",icon:(0,n.jsx)(U.A,{path:e6.v,size:24,fill:a.colors.labelLink})}),s.current=!0)},[l,o,c,i,p,t,a.colors.labelLink])},ti=e=>{let{availableTranslationLocales:t,originalLanguageCode:i}=e,[s,o]=(0,r.useState)(!1),a=(0,T.A)(),l=(0,W.cu)(),c=(0,K.kp)(l),{locale:p}=(0,eQ.A)(),y=(0,S.T9)({supportedLocales:t}),{isTranslationNudgeVisible:m,dismissTranslationNudge:h}=te();return tt({originalLanguageCode:i,availableTranslationLocales:t}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O.A,{target:(0,n.jsx)("div",{children:(0,n.jsx)(d.Pl,{defaultTheme:c,children:(0,n.jsx)(G.A,{id:"translate-btn",tooltipId:"viewer.translation.tooltip",icon:(0,n.jsx)(U.A,{path:e0.M,size:16}),onClick:()=>o(!0)})})}),title:a("viewer.translation.nudge.title"),placement:"bottom",isShowing:m,onClick:h}),y&&(0,n.jsx)(e9,{locale:p,languages:y,isOpen:s,onClose:()=>o(!1)})]})},ts=()=>{let e=(0,d.df)();return(0,n.jsx)("div",{className:a().dynamic([["4a35576be3cbdeef",[p.Ay.spacing.custom("0.1rem"),e.theme.colors.outlineSubduedDefault,p.Ay.spacing.sm]]])+" divider",children:(0,n.jsx)(a(),{id:"4a35576be3cbdeef",dynamic:[p.Ay.spacing.custom("0.1rem"),e.theme.colors.outlineSubduedDefault,p.Ay.spacing.sm],children:`.divider.__jsx-style-dynamic-selector{width:${p.Ay.spacing.custom("0.1rem")};background-color:${e.theme.colors.outlineSubduedDefault};height:${p.Ay.spacing.sm}}`})})},tn=e=>{let{storyId:t,sharingLevel:i,canEdit:s=!1,areSocialIconsHidden:o,isContextMenuHidden:l=!1,shouldAlwaysShowFavoriteButton:I,storyType:$,mode:N,isRenderedInlineInStory:z,isRenderedInFrameOrBriefing:T,canShowLikeButton:L=!0,isRenderedInNativeApp:D,...M}=e,[O,U]=(0,r.useState)(!1),[R,E]=(0,y.A)(!1),H=(0,u.bR)(),{isViewportMinWidth:V,isViewportMaxWidth:W}=(0,m.Ye)(),{authManager:q}=(0,h.Py)(),{onItemLike:K,onItemUnlike:Z}=_(),G=(0,P.ck)(),{allSupportedLanguages:X}=(0,C.Ut)(),J=G.getOriginalStoryLocale(),Q=(0,b.KN)(J,X),ee=(0,r.useMemo)(()=>[J,...G.getSupportedTranslationLocales()],[G,J]),et=(0,S.T9)({supportedLocales:ee}),ei=(0,A.nq)(),es=i.access===f.uQ.PUBLIC,en=i.isUnlisted,eo=(q||H.canShowItemActionsWhenSignedOut)&&void 0!==N&&"preview"!==N&&"embedded-preview"!==N,ea=!o&&es&&G.type!==j.z.Frame,er=()=>U(e=>!e),el=G.isTemplate&&V("large"),ec=(!l&&V("small")||I)&&!ei&&eo,ed=H.canShareSocially&&"embedded-preview"!==N&&"preview"!==N&&!o&&es&&(V("large")||G.type===j.z.Frame),ep=G.type===j.z.Story&&!z&&H.canTranslateViewerItems&&et&&et.length>0&&ee.length>1&&"view"===N,ey=G.type===j.z.Story&&!z&&"view"===N&&(0,k.Y)({typeKeywords:G.itemDetails.typeKeywords,typeKeywordId:x.cC.hasTranslation}),em=!l&&!ei&&"preview"!==N,eh=ec||ed||ep||ey||em,eg=L&&es&&!en&&(q?"function"==typeof K&&"function"==typeof Z:H.canShowItemActionsWhenSignedOut),ex=eg&&eh&&!z&&!T&&!W("small"),eu=G.type===j.z.Frame,eb={styles:(0,n.jsx)(a(),{id:"64792cbd5a2aac37",dynamic:[p.Ay.spacing.xxxxs],children:`.indicator-container.__jsx-style-dynamic-selector{margin:${p.Ay.spacing.xxxxs}}`}),className:a().dynamic([["64792cbd5a2aac37",[p.Ay.spacing.xxxxs]]])},eA=eh&&(0,n.jsxs)(n.Fragment,{children:[el&&(0,n.jsx)(B,{}),ec&&!D&&(0,n.jsx)(eI,{isRenderedInlineInStory:z,isRenderedInFrameOrBriefing:T}),ed&&!D&&(0,n.jsx)(eJ,{appTitle:M.title,isRenderedInlineInStory:z,isRenderedInFrameOrBriefing:T,getActiveNodeId:M.getActiveNodeId}),ep&&!D&&(0,n.jsx)(ti,{originalLanguageCode:Q,availableTranslationLocales:ee}),ey&&(0,n.jsx)(Y,{}),em&&!D&&(0,n.jsx)(ej,{favoriteContent:eo&&!V("small")&&(0,n.jsx)(e_,{},"add-remove-favorite")||void 0,canEdit:!!s,publishIndicator:(0,n.jsx)(w.A,{sharingLevel:i,mode:M.publishStatus,itemType:$,type:"indicator",indicatorClassName:c()("indicator-container",eb.className)}),onEmbedClicked:ea?er:void 0,onDuplicateClicked:E,mode:N,itemHref:M.itemHref}),(0,n.jsxs)(d.Pl,{defaultTheme:"light",children:[(0,n.jsx)(F.A,{onModalClose:er,isModalOpen:O}),(0,n.jsx)(v.A,{itemDetails:G.itemDetails,isTemplate:G.isTemplate,storyItemType:$,isVisible:R,onClose:E,duplicateMode:"published"})]}),eb.styles]}),ef=eu&&M.onFrameRestartClick&&(0,n.jsx)(eP,{onFrameRestartClick:M.onFrameRestartClick}),ek=eg&&!D?(0,n.jsx)(eD,{isRenderedInlineInStory:z,isRenderedInFrameOrBriefing:T,itemOwner:M.itemOwner}):null;return(0,n.jsxs)(n.Fragment,{children:[z?(es&&!en||G.type===j.z.Frame)&&(0,n.jsxs)("div",{className:a().dynamic([["fd176d4ae1bc0bc2",[p.Ay.spacing.lg,g.Ay.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"}),p.Ay.responsiveBreakpoints.large,p.Ay.spacing.xl]]])+" "+(c()("inline-actions-container",M.className)||""),children:[(0,n.jsxs)("div",{className:a().dynamic([["fd176d4ae1bc0bc2",[p.Ay.spacing.lg,g.Ay.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"}),p.Ay.responsiveBreakpoints.large,p.Ay.spacing.xl]]])+" inline-buttons",children:[ek,ef,eA]}),eg&&(0,n.jsx)(eL,{isRenderedInline:!0,isRenderedInNativeApp:D,itemOwner:M.itemOwner})]}):(0,n.jsxs)("div",{className:a().dynamic([["fd176d4ae1bc0bc2",[p.Ay.spacing.lg,g.Ay.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"}),p.Ay.responsiveBreakpoints.large,p.Ay.spacing.xl]]])+" header-actions-container",children:[ek,ex&&(0,n.jsx)(ts,{}),eA]}),(0,n.jsx)(a(),{id:"fd176d4ae1bc0bc2",dynamic:[p.Ay.spacing.lg,g.Ay.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"}),p.Ay.responsiveBreakpoints.large,p.Ay.spacing.xl],children:`.inline-actions-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin:${p.Ay.spacing.lg} 0}.inline-buttons.__jsx-style-dynamic-selector,.header-actions-container.__jsx-style-dynamic-selector{${g.Ay.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"})}}@media(min-width:${p.Ay.responsiveBreakpoints.large}){.inline-actions-container.__jsx-style-dynamic-selector{margin:${p.Ay.spacing.xl} 0}}`})]})}},885760:(e,t,i)=>{i.d(t,{xT:()=>c});var s=i(647682),n=i(989206),o=i(960642);let a=e=>Object.values(e?.resources??{}).find(e=>{let{type:t}=e;return"story-theme"===t})?.data.themeItemId,r=async e=>{let{themeItemId:t,storyItemData:i,authManager:s,portalHost:o,signal:r}=e,l=t??a(i);if(!l)return[];try{let e=await (0,n.e)({itemId:l,authManager:s,portalHost:o,signal:r});return e.unpublished?[void 0,l]:[e,l]}catch{return[void 0,l]}},l=async e=>{let{themeItemId:t,storyItemData:i,authManager:n,portalHost:r,signal:l}=e,c=t??a(i);if(c)try{return await (0,s.Gq)(c,{authentication:n,portal:(0,o.mZ)(r,n),signal:l})}catch{return}},c=async e=>{let{themeItemId:t,storyItemData:i,authManager:s,skipDetails:n,portalHost:o,signal:a}=e,[[c,d],p]=await Promise.all([r({themeItemId:t,storyItemData:i,authManager:s,portalHost:o}),n?void 0:l({themeItemId:t,storyItemData:i,authManager:s,portalHost:o,signal:a})]);return{...d&&{id:d},...c&&{data:c},...p&&{title:p.title,owner:p.owner},...p?.isOrgItem&&{isOrgItem:p.isOrgItem}}}},909005:(e,t,i)=>{i.d(t,{B:()=>a});var s=i(406029),n=i(455729),o=i(617709);let a=e=>class extends n.PureComponent{render(){return(0,s.jsx)(o.C.Consumer,{children:t=>(0,s.jsx)(e,{...this.props,collectionData:t.collectionData,collectionDisplay:t.collectionDisplay})})}}},935686:(e,t,i)=>{i.d(t,{Tt:()=>l,Lr:()=>c});var s=i(406029),n=i(455729),o=i(724490);let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)window.history.replaceState({},"disable autoplay",(0,o.wz)(window.location.href,["play","speed"]));else if(e){let t=(0,o.dn)(window.location.href,{play:"true",speed:e});window.history.replaceState({},"update autoplay speed",t)}},r=(0,n.createContext)({isAutoplayEnabled:!1,isAutoplayPaused:!1,autoplaySpeed:"medium",enableAutoplay:()=>{},disableAutoplay:()=>{},updateAutoplaySpeed:()=>{},updateIsAutoplayPaused:()=>{}}),l=e=>{let{children:t,initialQuery:i}=e,[l,c]=(0,n.useState)(!1),[d,p]=(0,n.useState)("medium"),[y,m]=(0,n.useState)(!0),h=i?.navigation==="false";return(0,n.useEffect)(()=>{let e=(0,o.JV)(i)&&!h,t=(0,o.TX)(i);c(e),p(t),e&&a(t)},[i]),(0,s.jsx)(r.Provider,{value:{isAutoplayEnabled:l,isAutoplayPaused:y,autoplaySpeed:d,shouldHideAutoPlay:h,enableAutoplay:()=>{c(!0),a(d)},disableAutoplay:()=>{c(!1),p("medium"),a(void 0,!0)},updateAutoplaySpeed:e=>{p(e),a(e)},updateIsAutoplayPaused:e=>{m(e)}},children:t})},c=e=>class extends n.PureComponent{render(){return(0,s.jsx)(r.Consumer,{children:t=>(0,s.jsx)(e,{...this.props,...t})})}}},999276:(e,t,i)=>{i.d(t,{iF:()=>o,jq:()=>r,kp:()=>a,r3:()=>n});var s=i(520925);let n=async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return await s.t.insertNode(e,t)},o=async e=>await s.t.insertSubtree(e),a=s.t.insertResource,r=async e=>{let{data:t,mode:i,context:n,registry:o}=e,a={...n||{},storyData:t};return s.t.setRegistry(o),await s.t.build({data:t,mode:i,context:a})}}}]);